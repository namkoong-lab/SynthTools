{
  "tool_name": "Anisotropic Diffusion Filter",
  "tool_description": "Applies edge-preserving anisotropic diffusion filtering to reduce noise while maintaining important anatomical boundaries in medical images.",
  "parameters": {
    "image_data": {
      "type": "array",
      "required": true,
      "description": "Input image data as flattened array",
      "items": {
        "type": "number"
      }
    },
    "image_dimensions": {
      "type": "array",
      "required": true,
      "description": "Image dimensions [height, width]",
      "items": {
        "type": "integer"
      }
    },
    "iterations": {
      "type": "integer",
      "required": false,
      "description": "Number of diffusion iterations (10-200)",
      "default": 50
    },
    "kappa": {
      "type": "number",
      "required": false,
      "description": "Conduction coefficient controlling edge preservation (1-100)",
      "default": 20
    },
    "gamma": {
      "type": "number",
      "required": false,
      "description": "Time step for diffusion process (0.1-0.25)",
      "default": 0.2
    },
    "diffusion_function": {
      "type": "string",
      "required": false,
      "description": "Diffusion function type: exponential or quadratic",
      "default": "exponential"
    },
    "roi_mask": {
      "type": "array",
      "required": false,
      "description": "Binary mask for region of interest (same size as image)",
      "items": {
        "type": "integer"
      },
      "default": null
    }
  },
  "error_messages": [
    "Invalid iteration count: Iterations must be between 10 and 200.",
    "Invalid kappa value: Kappa must be between 1 and 100.",
    "Invalid gamma value: Gamma must be between 0.1 and 0.25 for stability.",
    "Unsupported diffusion function: Use either 'exponential' or 'quadratic'.",
    "ROI mask dimension mismatch: ROI mask must have same dimensions as image.",
    "Invalid ROI mask values: ROI mask must contain only 0 and 1 values."
  ],
  "usage": "Provide image_data and image_dimensions. Adjust iterations for filtering strength, kappa for edge sensitivity, and gamma for process speed. Use roi_mask to limit processing to specific regions.",
  "output_details": {
    "filtered_image": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Anisotropic diffusion filtered image data"
    },
    "convergence_metric": {
      "type": "number",
      "description": "Measure of diffusion process convergence"
    },
    "edge_preservation_quality": {
      "type": "number",
      "description": "Quality score for edge preservation (0-100)"
    },
    "processing_iterations": {
      "type": "integer",
      "description": "Actual number of iterations performed"
    }
  }
}