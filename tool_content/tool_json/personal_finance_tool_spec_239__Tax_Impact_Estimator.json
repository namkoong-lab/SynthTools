{
  "tool_name": "Tax Impact Estimator",
  "tool_description": "Estimates tax implications of proposed trades including capital gains, losses, and tax-loss harvesting opportunities.",
  "parameters": {
    "proposed_trades": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "required": true,
      "description": "List of proposed trades in format 'ACTION SYMBOL AMOUNT'",
      "minItems": 1,
      "maxItems": 20
    },
    "cost_basis_data": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": true,
      "description": "Cost basis for each position being sold",
      "minItems": 1,
      "maxItems": 20
    },
    "holding_periods": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "required": true,
      "description": "Holding periods in days for each position",
      "minItems": 1,
      "maxItems": 20
    },
    "tax_bracket": {
      "type": "number",
      "required": true,
      "description": "Marginal tax rate as decimal (e.g., 0.24 for 24%)"
    },
    "capital_gains_rate": {
      "type": "number",
      "required": true,
      "description": "Long-term capital gains rate as decimal"
    }
  },
  "error_messages": [
    "Mismatched arrays: All input arrays must have matching lengths for corresponding positions.",
    "Invalid tax rates: Tax bracket and capital gains rate must be between 0 and 1.",
    "Invalid holding periods: Holding periods must be positive integers.",
    "Invalid cost basis: Cost basis values must be positive numbers.",
    "Invalid trade format: Trades must be in format 'BUY/SELL SYMBOL AMOUNT'.",
    "Empty trade list: At least one trade must be specified."
  ],
  "usage": "Provide proposed trades with corresponding cost basis data, holding periods, and applicable tax rates. The tool calculates expected tax consequences and suggests optimization strategies.",
  "output_details": {
    "total_capital_gains": {
      "type": "number",
      "description": "Total realized capital gains from proposed trades"
    },
    "total_capital_losses": {
      "type": "number",
      "description": "Total realized capital losses from proposed trades"
    },
    "short_term_gains": {
      "type": "number",
      "description": "Short-term capital gains (held < 1 year)"
    },
    "long_term_gains": {
      "type": "number",
      "description": "Long-term capital gains (held >= 1 year)"
    },
    "estimated_tax_liability": {
      "type": "number",
      "description": "Estimated tax liability from all trades"
    },
    "tax_loss_harvest_opportunities": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Identified tax-loss harvesting opportunities"
    },
    "net_after_tax_impact": {
      "type": "number",
      "description": "Net portfolio impact after taxes"
    }
  }
}