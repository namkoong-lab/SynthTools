{
  "tool_name": "Rebalancing Calculator",
  "tool_description": "Calculates optimal trades needed to rebalance portfolio from current allocation to target allocation, considering transaction costs and constraints.",
  "parameters": {
    "current_symbols": {
      "type": "array",
      "required": true,
      "description": "Current portfolio asset symbols",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "maxItems": 50
    },
    "current_quantities": {
      "type": "array",
      "required": true,
      "description": "Current quantities of each asset",
      "items": {
        "type": "number"
      },
      "minItems": 1,
      "maxItems": 50
    },
    "target_allocations": {
      "type": "array",
      "required": true,
      "description": "Target allocation percentages (should sum to 1.0)",
      "items": {
        "type": "number"
      },
      "minItems": 1,
      "maxItems": 50
    },
    "current_prices": {
      "type": "array",
      "required": true,
      "description": "Current market prices for each asset",
      "items": {
        "type": "number"
      },
      "minItems": 1,
      "maxItems": 50
    },
    "rebalance_threshold": {
      "type": "number",
      "required": false,
      "description": "Minimum deviation percentage to trigger rebalancing",
      "default": 5.0
    },
    "max_trade_size": {
      "type": "number",
      "required": false,
      "description": "Maximum trade size as percentage of portfolio",
      "default": 20.0
    },
    "exclude_small_trades": {
      "type": "boolean",
      "required": false,
      "description": "Whether to exclude trades below minimum threshold",
      "default": true
    },
    "minimum_trade_value": {
      "type": "number",
      "required": false,
      "description": "Minimum trade value in base currency",
      "default": 10.0
    }
  },
  "error_messages": [
    "Array length mismatch: All input arrays must have the same length.",
    "Invalid target allocations: Target allocations must be positive and sum to approximately 1.0.",
    "Invalid price data: All current prices must be positive numbers.",
    "Rebalance threshold out of range: rebalance_threshold must be between 1.0 and 50.0.",
    "Max trade size invalid: max_trade_size must be between 1.0 and 100.0."
  ],
  "usage": "Provide current portfolio data (symbols, quantities, prices) and target_allocations. Configure thresholds and constraints as needed. Returns specific trades required for rebalancing.",
  "output_details": {
    "rebalance_needed": {
      "type": "boolean",
      "description": "Whether rebalancing is needed based on thresholds"
    },
    "trade_symbols": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Assets that require trading"
    },
    "trade_actions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Buy or sell action for each trade"
    },
    "trade_quantities": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Quantities to trade for each asset"
    },
    "estimated_costs": {
      "type": "number",
      "description": "Estimated total transaction costs"
    },
    "allocation_improvement": {
      "type": "number",
      "description": "Improvement in allocation accuracy after rebalancing"
    }
  }
}