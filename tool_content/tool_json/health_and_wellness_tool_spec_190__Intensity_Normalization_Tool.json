{
  "tool_name": "Intensity Normalization Tool",
  "tool_description": "Standardizes image intensities across different scanners, acquisition protocols, and time points using histogram matching, Z-score normalization, or percentile-based methods.",
  "parameters": {
    "image_path": {
      "type": "string",
      "required": true,
      "description": "Path to the input image for normalization"
    },
    "normalization_method": {
      "type": "string",
      "required": true,
      "description": "Normalization technique (z_score, min_max, histogram_matching, percentile, whitening)"
    },
    "reference_image_path": {
      "type": "string",
      "required": false,
      "description": "Reference image path for histogram matching",
      "default": "None"
    },
    "target_range": {
      "type": "array",
      "required": false,
      "description": "Target intensity range [min, max] for min_max normalization",
      "items": {
        "type": "number"
      },
      "default": "None"
    },
    "percentile_range": {
      "type": "array",
      "required": false,
      "description": "Percentile range [low, high] for robust normalization",
      "items": {
        "type": "number"
      },
      "default": "None"
    },
    "mask_path": {
      "type": "string",
      "required": false,
      "description": "Path to mask for region-specific normalization",
      "default": "None"
    },
    "output_path": {
      "type": "string",
      "required": true,
      "description": "Path for the normalized output image"
    }
  },
  "error_messages": [
    "Input image not found: Ensure image_path points to a valid image file.",
    "Unsupported normalization method: Use one of [z_score, min_max, histogram_matching, percentile, whitening].",
    "Reference image required: histogram_matching method requires reference_image_path.",
    "Reference image not found: Ensure reference_image_path points to a valid image file.",
    "Invalid target range: target_range must be [min, max] with min < max.",
    "Invalid percentile range: percentile_range must be [low, high] with 0 <= low < high <= 100.",
    "Mask file not found: Ensure mask_path points to a valid mask file.",
    "Incompatible dimensions: Image and mask dimensions must match."
  ],
  "usage": "Provide image_path, normalization_method, and output_path. For histogram_matching, include reference_image_path. For min_max, specify target_range. For percentile-based methods, set percentile_range. Use mask_path for region-specific normalization.",
  "output_details": {
    "normalization_success": {
      "type": "boolean",
      "description": "Whether normalization completed successfully"
    },
    "original_intensity_range": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Original image intensity range [min, max]"
    },
    "normalized_intensity_range": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Normalized image intensity range [min, max]"
    },
    "mean_intensity": {
      "type": "number",
      "description": "Mean intensity of normalized image"
    },
    "std_intensity": {
      "type": "number",
      "description": "Standard deviation of normalized intensities"
    },
    "histogram_similarity": {
      "type": "number",
      "description": "Similarity score with reference (if applicable)"
    }
  }
}