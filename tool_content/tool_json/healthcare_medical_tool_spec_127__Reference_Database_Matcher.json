{
  "tool_name": "Reference Database Matcher",
  "tool_description": "Matches detected anomalies against a reference database of known pathologies to provide similar case examples and differential diagnosis suggestions.",
  "parameters": {
    "feature_vector": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": true,
      "description": "Feature vector of the detected anomaly"
    },
    "modality": {
      "type": "string",
      "required": true,
      "description": "Imaging modality: CT, MRI, X-ray, Ultrasound"
    },
    "anatomical_region": {
      "type": "string",
      "required": true,
      "description": "Body region: chest, abdomen, head, spine, extremities"
    },
    "top_matches": {
      "type": "integer",
      "required": false,
      "default": 5,
      "description": "Number of top similar cases to return (1-20)"
    },
    "similarity_threshold": {
      "type": "number",
      "required": false,
      "default": 0.7,
      "description": "Minimum similarity score for matches (0.5-0.95)"
    },
    "pathology_filter": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "required": false,
      "default": null,
      "description": "Filter matches by pathology types"
    }
  },
  "error_messages": [
    "Invalid modality: Use one of [CT, MRI, X-ray, Ultrasound].",
    "Invalid anatomical region: Use one of [chest, abdomen, head, spine, extremities].",
    "Invalid parameters: top_matches must be 1-20, similarity_threshold must be 0.5-0.95.",
    "Database connection failed: Unable to access reference database. Check connectivity.",
    "No matches found: No similar cases found above the similarity threshold."
  ],
  "usage": "Provide feature_vector, modality, and anatomical_region. Adjust top_matches and similarity_threshold based on diagnostic needs. Use pathology_filter to narrow search scope.",
  "output_details": {
    "matched_cases": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "IDs of matched reference cases"
    },
    "similarity_scores": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Similarity scores for each matched case"
    },
    "pathology_suggestions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Suggested pathologies based on matches"
    },
    "confidence_in_matches": {
      "type": "number",
      "description": "Overall confidence in the matching results"
    },
    "differential_diagnoses": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Potential differential diagnoses"
    }
  }
}