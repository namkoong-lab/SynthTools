{
  "tool_name": "Diversification Analyzer",
  "tool_description": "Analyzes portfolio diversification using concentration metrics, effective number of positions, and diversification ratios to assess concentration risk.",
  "parameters": {
    "weights": {
      "type": "array",
      "required": true,
      "description": "Array of portfolio weights (should sum to 1.0)",
      "items": {
        "type": "number"
      },
      "minItems": 2
    },
    "correlations": {
      "type": "array",
      "required": false,
      "description": "Flattened correlation matrix for diversification ratio calculation",
      "items": {
        "type": "number"
      },
      "default": null
    },
    "sector_groups": {
      "type": "array",
      "required": false,
      "description": "Array indicating sector group for each asset (same order as weights)",
      "items": {
        "type": "string"
      },
      "default": null
    }
  },
  "error_messages": [
    "Weight validation error: Weights must sum to 1.0 (Â±0.01) and all be non-negative.",
    "Correlation matrix error: If provided, correlations array length must equal n*(n-1)/2 where n is number of assets.",
    "Sector groups mismatch: sector_groups array must have same length as weights array if provided.",
    "Insufficient positions: At least 2 positions required for diversification analysis."
  ],
  "usage": "Provide portfolio weights to calculate basic diversification metrics. Optionally include correlations and sector groupings for advanced analysis.",
  "output_details": {
    "herfindahl_index": {
      "type": "number",
      "description": "Herfindahl-Hirschman concentration index (0 to 1)"
    },
    "effective_positions": {
      "type": "number",
      "description": "Effective number of positions in the portfolio"
    },
    "concentration_ratio_top5": {
      "type": "number",
      "description": "Weight concentration in top 5 positions"
    },
    "diversification_ratio": {
      "type": "number",
      "description": "Diversification ratio (only if correlations provided)"
    },
    "sector_concentration": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Array of sector concentration ratios (only if sector_groups provided)"
    }
  }
}