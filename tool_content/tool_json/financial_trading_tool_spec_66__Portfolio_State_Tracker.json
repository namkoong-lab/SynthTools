{
  "tool_name": "Portfolio State Tracker",
  "tool_description": "Tracks portfolio positions, cash balance, and equity throughout the backtesting period, maintaining accurate state for performance calculation.",
  "parameters": {
    "trades_source": {
      "type": "string",
      "required": true,
      "description": "Source of executed trade records"
    },
    "initial_capital": {
      "type": "number",
      "required": true,
      "description": "Starting portfolio capital"
    },
    "position_tracking": {
      "type": "boolean",
      "required": false,
      "description": "Track individual position details",
      "default": true
    }
  },
  "error_messages": [
    "Invalid trades source: Cannot access the specified trade records",
    "Invalid initial capital: Must be a positive number greater than zero",
    "Portfolio tracking failed: Unable to maintain consistent portfolio state",
    "Insufficient capital: Trades exceed available capital for execution"
  ],
  "usage": "Provide trades_source and initial_capital, optionally enable position_tracking. Maintains and returns portfolio state throughout backtesting.",
  "output_details": {
    "final_equity": {
      "type": "number",
      "description": "Final portfolio equity value"
    },
    "cash_balance": {
      "type": "number",
      "description": "Final cash balance"
    },
    "total_positions": {
      "type": "integer",
      "description": "Number of positions held"
    },
    "equity_curve_points": {
      "type": "integer",
      "description": "Number of equity curve data points"
    },
    "tracking_status": {
      "type": "string",
      "description": "Portfolio tracking status and any issues"
    }
  }
}