{
  "tool_name": "Expected Shortfall Calculator",
  "tool_description": "Calculates Expected Shortfall (Conditional VaR) using various methods with multiple confidence levels and distributional assumptions.",
  "parameters": {
    "returns": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": true,
      "description": "Array of portfolio or asset returns",
      "minItems": 30
    },
    "confidence_levels": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": false,
      "description": "Confidence levels for ES calculation",
      "default": [
        0.95,
        0.99
      ]
    },
    "method": {
      "type": "string",
      "required": true,
      "description": "ES calculation method: parametric, historical, monte_carlo"
    },
    "portfolio_value": {
      "type": "number",
      "required": false,
      "description": "Current portfolio value for absolute ES calculation",
      "default": 1000000
    }
  },
  "error_messages": [
    "Insufficient return data: Need at least 30 return observations for reliable ES estimation.",
    "Invalid confidence levels: All values must be between 0 and 1 exclusive.",
    "Invalid ES method: Must be one of [parametric, historical, monte_carlo].",
    "Invalid portfolio value: Must be positive number.",
    "Extreme tail insufficient: Not enough observations in tail for historical ES calculation."
  ],
  "usage": "Provide return array and specify ES method. Configure confidence levels and portfolio value. Returns Expected Shortfall estimates and tail risk measures.",
  "output_details": {
    "expected_shortfall": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Expected Shortfall estimates for each confidence level"
    },
    "confidence_levels": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Confidence levels used in calculation"
    },
    "tail_observations": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "description": "Number of tail observations for each confidence level"
    },
    "coherence_check": {
      "type": "boolean",
      "description": "Whether ES estimates satisfy coherence properties"
    }
  }
}