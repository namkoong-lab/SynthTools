{
  "tool_name": "DTC Code Retriever",
  "tool_description": "Retrieves all stored diagnostic trouble codes from the vehicle's engine control module and other diagnostic systems.",
  "parameters": {
    "connection_status": {
      "type": "string",
      "required": true,
      "description": "OBD connection status from scanner (must be 'connected')"
    },
    "code_types": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "required": false,
      "default": [
        "stored",
        "pending"
      ],
      "description": "Types of codes to retrieve (stored, pending, permanent)"
    },
    "system_modules": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "required": false,
      "default": [
        "engine",
        "transmission",
        "abs",
        "airbag"
      ],
      "description": "Vehicle systems to query for codes"
    }
  },
  "error_messages": [
    "Connection not established: OBD connection must be active before retrieving codes.",
    "Invalid code type: Use combination of [stored, pending, permanent] in code_types array.",
    "Module communication error: One or more specified system modules are not responding or not present.",
    "No codes found: Vehicle has no diagnostic trouble codes stored in specified systems."
  ],
  "usage": "Ensure OBD connection is established, then specify which code types and system modules to query. Tool retrieves all available DTCs with timestamps.",
  "output_details": {
    "total_codes": {
      "type": "integer",
      "description": "Total number of diagnostic codes found"
    },
    "dtc_codes": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Array of diagnostic trouble code identifiers (e.g., P0301, B1256)"
    },
    "code_status": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Status of each code (stored, pending, permanent)"
    },
    "retrieval_timestamp": {
      "type": "string",
      "description": "When codes were retrieved"
    }
  }
}