{
  "tool_name": "QC Rule Evaluator",
  "tool_description": "Evaluates quality control data against Westgard rules and other QC rules to detect analytical errors and system failures.",
  "parameters": {
    "qc_record_ids": {
      "type": "array",
      "required": true,
      "description": "Array of QC record identifiers to evaluate",
      "items": {
        "type": "string"
      },
      "minItems": 2,
      "maxItems": 100
    },
    "control_limits_source": {
      "type": "string",
      "required": true,
      "description": "Source of control limits (analysis_id from Statistical QC Analyzer)"
    },
    "westgard_rules": {
      "type": "array",
      "required": false,
      "description": "Westgard rules to apply",
      "items": {
        "type": "string"
      },
      "default": [
        "1-3s",
        "2-2s",
        "R-4s",
        "4-1s",
        "10-x"
      ]
    },
    "evaluation_mode": {
      "type": "string",
      "required": false,
      "description": "Evaluation strictness (strict, standard, lenient)",
      "default": "standard"
    },
    "alert_threshold": {
      "type": "string",
      "required": false,
      "description": "Alert level threshold (warning, critical, immediate)",
      "default": "warning"
    },
    "include_trend_rules": {
      "type": "boolean",
      "required": false,
      "description": "Include trend-based rule evaluation",
      "default": true
    },
    "batch_evaluation": {
      "type": "boolean",
      "required": false,
      "description": "Evaluate as batch or individual records",
      "default": false
    }
  },
  "error_messages": [
    "Insufficient records: At least 2 QC records are required for rule evaluation.",
    "Invalid control limits source: The specified control_limits_source does not exist.",
    "Invalid Westgard rules: westgard_rules must contain valid rule names from [1-3s, 2-2s, R-4s, 4-1s, 10-x, 7-T, 9-1s].",
    "Invalid evaluation mode: evaluation_mode must be one of [strict, standard, lenient].",
    "Invalid alert threshold: alert_threshold must be one of [warning, critical, immediate].",
    "Rule evaluation failed: Unable to evaluate rules due to missing or invalid control limit data."
  ],
  "usage": "Provide QC record IDs, control limits source, and rule parameters. The tool applies Westgard and other QC rules to identify potential analytical problems.",
  "output_details": {
    "evaluation_id": {
      "type": "string",
      "description": "Unique identifier for this rule evaluation"
    },
    "violations_found": {
      "type": "integer",
      "description": "Total number of rule violations detected"
    },
    "violated_rules": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of specific rules that were violated"
    },
    "violation_records": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "QC record IDs that triggered violations"
    },
    "alert_level": {
      "type": "string",
      "description": "Highest alert level triggered (none, warning, critical, immediate)"
    },
    "recommended_action": {
      "type": "string",
      "description": "Recommended corrective action based on violations"
    },
    "evaluation_timestamp": {
      "type": "string",
      "description": "When the evaluation was performed",
      "format": "date-time"
    }
  }
}