{
  "tool_name": "Cart Discount Calculator",
  "tool_description": "Calculates the exact discount amounts for cart items based on discount rules, including line-item breakdowns and tax implications.",
  "parameters": {
    "cart_items": {
      "type": "array",
      "required": true,
      "description": "List of product IDs in the cart",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "maxItems": 100
    },
    "item_prices": {
      "type": "array",
      "required": true,
      "description": "Prices corresponding to each cart item",
      "items": {
        "type": "number"
      },
      "minItems": 1,
      "maxItems": 100
    },
    "item_quantities": {
      "type": "array",
      "required": true,
      "description": "Quantities corresponding to each cart item",
      "items": {
        "type": "integer"
      },
      "minItems": 1,
      "maxItems": 100
    },
    "discount_rules": {
      "type": "array",
      "required": true,
      "description": "List of discount rule IDs to apply",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "maxItems": 20
    },
    "tax_rate": {
      "type": "number",
      "required": false,
      "description": "Tax rate as decimal (e.g., 0.08 for 8%)",
      "default": 0.0
    },
    "currency": {
      "type": "string",
      "required": false,
      "description": "Currency code for calculations",
      "default": "USD"
    },
    "apply_tax_after_discount": {
      "type": "boolean",
      "required": false,
      "description": "Whether to calculate tax after applying discount",
      "default": true
    },
    "round_to_cents": {
      "type": "boolean",
      "required": false,
      "description": "Whether to round calculations to nearest cent",
      "default": true
    },
    "max_discount_percentage": {
      "type": "number",
      "required": false,
      "description": "Maximum discount percentage allowed (0-100)",
      "default": 100.0
    },
    "min_order_total": {
      "type": "number",
      "required": false,
      "description": "Minimum order total required for discount",
      "default": 0.0
    }
  },
  "error_messages": [
    "Mismatched array lengths: cart_items, item_prices, and item_quantities must have the same length.",
    "Invalid price values: All item prices must be positive numbers.",
    "Invalid quantity values: All item quantities must be positive integers.",
    "Invalid tax rate: Tax rate must be between 0 and 1.",
    "Invalid discount rules: All discount rule IDs must be valid.",
    "Invalid max discount percentage: Must be between 0 and 100.",
    "Currency not supported: Provided currency code is not supported."
  ],
  "usage": "Provide cart_items, item_prices, item_quantities, and discount_rules. Optionally set tax_rate, currency, and calculation preferences. Returns detailed discount calculations.",
  "output_details": {
    "total_discount": {
      "type": "number",
      "description": "Total discount amount applied"
    },
    "line_item_discounts": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Discount amounts for each line item"
    },
    "original_total": {
      "type": "number",
      "description": "Original cart total before discounts"
    },
    "discounted_total": {
      "type": "number",
      "description": "Cart total after applying discounts"
    },
    "tax_amount": {
      "type": "number",
      "description": "Tax amount calculated"
    },
    "final_total": {
      "type": "number",
      "description": "Final total including tax"
    },
    "savings_percentage": {
      "type": "number",
      "description": "Percentage savings from discounts"
    }
  }
}