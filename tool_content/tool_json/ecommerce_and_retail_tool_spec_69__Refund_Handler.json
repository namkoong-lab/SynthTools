{
  "tool_name": "Refund Handler",
  "tool_description": "Processes refund requests for completed transactions, handling partial and full refunds across different payment gateways.",
  "parameters": {
    "original_transaction_id": {
      "type": "string",
      "required": true,
      "description": "Transaction ID of the original payment to refund"
    },
    "refund_amount": {
      "type": "number",
      "required": true,
      "description": "Amount to refund (must not exceed captured amount)"
    },
    "refund_reason": {
      "type": "string",
      "required": true,
      "description": "Reason for refund: customer_request, defective_product, order_cancelled, duplicate_charge, fraud_chargeback"
    },
    "refund_reference": {
      "type": "string",
      "required": false,
      "description": "Internal reference for the refund",
      "default": null
    },
    "notify_customer": {
      "type": "boolean",
      "required": false,
      "description": "Whether to send refund notification to customer",
      "default": true
    },
    "admin_notes": {
      "type": "string",
      "required": false,
      "description": "Internal notes about the refund",
      "default": null
    }
  },
  "error_messages": [
    "Original transaction not found: No transaction exists with the provided transaction_id.",
    "Refund amount exceeds captured: Refund amount cannot exceed the amount captured from original transaction.",
    "Transaction not refundable: Original transaction status does not allow refunds.",
    "Gateway refund failed: Payment gateway declined the refund request.",
    "Invalid refund reason: Use one of [customer_request, defective_product, order_cancelled, duplicate_charge, fraud_chargeback].",
    "Refund already processed: A refund for this amount has already been processed for this transaction."
  ],
  "usage": "Provide original_transaction_id, refund_amount, and refund_reason. Optionally include refund_reference, notify_customer flag, and admin_notes for record keeping.",
  "output_details": {
    "refund_status": {
      "type": "string",
      "description": "Status of refund: processed, pending, failed"
    },
    "refund_id": {
      "type": "string",
      "description": "Unique identifier for this refund"
    },
    "gateway_refund_id": {
      "type": "string",
      "description": "Payment gateway's refund identifier"
    },
    "refund_timestamp": {
      "type": "string",
      "description": "Timestamp when refund was processed"
    },
    "expected_completion": {
      "type": "string",
      "description": "Expected date when refund will appear in customer account"
    }
  }
}