{
  "tool_name": "Nutritional Gap Analyzer",
  "tool_description": "Analyzes a meal plan against nutritional targets to identify deficiencies or excesses and suggests improvements.",
  "parameters": {
    "meal_schedule_id": {
      "type": "string",
      "required": true,
      "description": "Schedule ID from Weekly Meal Scheduler"
    },
    "nutritional_targets": {
      "type": "string",
      "required": true,
      "description": "Target profile ID from Nutritional Target Calculator"
    },
    "analysis_period": {
      "type": "string",
      "required": false,
      "default": "weekly",
      "description": "Analysis timeframe: daily or weekly"
    },
    "tolerance_percentage": {
      "type": "number",
      "required": false,
      "default": 10.0,
      "description": "Acceptable variance from targets as percentage (5.0-25.0)"
    }
  },
  "error_messages": [
    "Invalid schedule ID: Meal schedule not found or invalid.",
    "Invalid nutritional targets: Target profile not found or invalid.",
    "Invalid analysis period: Must be 'daily' or 'weekly'.",
    "Invalid tolerance percentage: Must be between 5.0 and 25.0.",
    "Incomplete nutritional data: Some recipes lack sufficient nutritional information.",
    "Calculation error: Unable to compute nutritional gaps due to missing data."
  ],
  "usage": "Provide meal_schedule_id and nutritional_targets. Optionally specify analysis_period and tolerance_percentage for customized analysis sensitivity.",
  "output_details": {
    "overall_score": {
      "type": "integer",
      "description": "Overall nutritional adequacy score (0-100)"
    },
    "calorie_status": {
      "type": "string",
      "description": "Calorie status: deficit, adequate, or excess"
    },
    "protein_gap": {
      "type": "number",
      "description": "Protein gap in grams (negative = deficit, positive = excess)"
    },
    "carb_gap": {
      "type": "number",
      "description": "Carbohydrate gap in grams"
    },
    "fat_gap": {
      "type": "number",
      "description": "Fat gap in grams"
    },
    "fiber_gap": {
      "type": "number",
      "description": "Fiber gap in grams"
    },
    "micronutrient_concerns": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of concerning micronutrient levels"
    },
    "improvement_suggestions": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Specific suggestions to address nutritional gaps"
    }
  }
}