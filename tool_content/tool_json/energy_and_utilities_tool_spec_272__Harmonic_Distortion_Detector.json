{
  "tool_name": "Harmonic Distortion Detector",
  "tool_description": "Detects and analyzes harmonic distortion in electrical waveforms, identifying specific harmonic components and their magnitudes.",
  "parameters": {
    "waveform_data": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": true,
      "description": "Digital waveform samples (voltage or current)",
      "minItems": 128,
      "maxItems": 65536
    },
    "sampling_frequency": {
      "type": "number",
      "required": true,
      "description": "Waveform sampling frequency in Hz (1000 to 100000)"
    },
    "fundamental_frequency": {
      "type": "number",
      "required": false,
      "description": "Fundamental frequency in Hz (50 or 60)",
      "default": 60
    },
    "harmonic_order_limit": {
      "type": "integer",
      "required": false,
      "description": "Maximum harmonic order to analyze (5 to 50)",
      "default": 25
    }
  },
  "error_messages": [
    "Insufficient samples: Minimum 128 samples required for harmonic analysis.",
    "Invalid sampling frequency: Must be between 1000 and 100000 Hz.",
    "Invalid fundamental frequency: Must be either 50 or 60 Hz.",
    "Harmonic order out of range: Must be between 5 and 50.",
    "Nyquist criterion violation: Sampling frequency must be at least twice the highest harmonic frequency."
  ],
  "usage": "Provide waveform_data array and sampling_frequency. Optionally specify fundamental_frequency and harmonic_order_limit. Returns harmonic analysis with individual component magnitudes.",
  "output_details": {
    "thd_percentage": {
      "type": "number",
      "description": "Total harmonic distortion as percentage"
    },
    "harmonic_magnitudes": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "description": "Magnitude of each harmonic component as percentage of fundamental"
    },
    "dominant_harmonics": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "description": "Harmonic orders with highest magnitudes"
    },
    "distortion_classification": {
      "type": "string",
      "description": "Distortion level: low, moderate, high, severe"
    },
    "compliance_status": {
      "type": "boolean",
      "description": "Whether THD meets IEEE 519 standards"
    }
  }
}