{
  "tool_name": "Portfolio Deviation Calculator",
  "tool_description": "Calculates how much current portfolio allocations deviate from target allocations and identifies which assets need rebalancing.",
  "parameters": {
    "current_holdings": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "required": true,
      "description": "List of current asset symbols",
      "minItems": 1,
      "maxItems": 50
    },
    "current_values": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": true,
      "description": "Current market values for each holding",
      "minItems": 1,
      "maxItems": 50
    },
    "current_percentages": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": true,
      "description": "Current allocation percentages for each holding",
      "minItems": 1,
      "maxItems": 50
    },
    "target_holdings": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "required": true,
      "description": "List of target asset symbols",
      "minItems": 1,
      "maxItems": 50
    },
    "target_percentages": {
      "type": "array",
      "items": {
        "type": "number"
      },
      "required": true,
      "description": "Target allocation percentages for each asset",
      "minItems": 1,
      "maxItems": 50
    },
    "deviation_threshold": {
      "type": "number",
      "required": false,
      "description": "Minimum deviation percentage to trigger rebalancing",
      "default": 5.0
    }
  },
  "error_messages": [
    "Mismatched array lengths: current_holdings, current_values, and current_percentages must have the same length.",
    "Mismatched target arrays: target_holdings and target_percentages must have the same length.",
    "Invalid percentages: All percentage values must be between 0 and 100, and should sum to approximately 100.",
    "Invalid threshold: Deviation threshold must be between 0.1 and 50 percent.",
    "Empty holdings: At least one asset must be specified in holdings arrays.",
    "Invalid values: All market values must be positive numbers."
  ],
  "usage": "Provide current portfolio holdings with values and percentages, along with target holdings and percentages. Optionally set deviation_threshold to determine sensitivity for rebalancing triggers.",
  "output_details": {
    "total_deviation": {
      "type": "number",
      "description": "Overall portfolio deviation from targets"
    },
    "needs_rebalancing": {
      "type": "boolean",
      "description": "Whether portfolio needs rebalancing based on threshold"
    },
    "overweight_assets": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Assets that are above target allocation"
    },
    "underweight_assets": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Assets that are below target allocation"
    },
    "deviation_details": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Detailed deviation information for each asset"
    },
    "rebalancing_priority": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Assets ranked by rebalancing priority"
    }
  }
}