{
  "tool_name": "check_margin_requirements",
  "tool_description": "Validates margin requirements and compliance against position values, account equity, and regulatory limits.",
  "parameters": {
    "account_id": {
      "type": "string",
      "required": true,
      "description": "Account identifier for margin checking"
    },
    "positions": {
      "type": "array",
      "required": true,
      "description": "Current position data for margin calculation",
      "items": {
        "type": "string"
      }
    },
    "cash_balance": {
      "type": "number",
      "required": true,
      "description": "Current cash balance for the account"
    },
    "margin_requirements": {
      "type": "array",
      "required": true,
      "description": "Margin requirement rules and percentages",
      "items": {
        "type": "string"
      }
    },
    "regulatory_regime": {
      "type": "string",
      "required": false,
      "description": "Regulatory framework: reg_t, portfolio_margin, cross_margin",
      "default": "reg_t"
    },
    "overnight_margin": {
      "type": "boolean",
      "required": false,
      "description": "Apply overnight margin requirements instead of intraday",
      "default": true
    }
  },
  "error_messages": [
    "Invalid account_id: Account not found or accessible",
    "Invalid regulatory_regime: Must be one of [reg_t, portfolio_margin, cross_margin]",
    "Insufficient margin data: margin_requirements array cannot be empty",
    "Cash balance invalid: cash_balance must be a valid number",
    "Margin calculation error: Unable to compute margin requirements"
  ],
  "usage": "Provide account_id, positions, cash_balance, and margin_requirements. Specify regulatory_regime and overnight_margin settings for appropriate margin calculation.",
  "output_details": {
    "margin_compliant": {
      "type": "boolean",
      "description": "Whether account meets margin requirements"
    },
    "required_margin": {
      "type": "number",
      "description": "Total margin requirement amount"
    },
    "excess_liquidity": {
      "type": "number",
      "description": "Available excess liquidity above requirements"
    },
    "margin_violations": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Specific margin requirement violations"
    },
    "maintenance_calls": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Positions requiring maintenance margin calls"
    }
  }
}