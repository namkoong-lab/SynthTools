{
  "tool_name": "Tax Calculation Validator",
  "tool_description": "Validates tax calculations on invoice line items against applicable tax rates and rules, ensuring accuracy of tax amounts and total calculations.",
  "parameters": {
    "line_items": {
      "type": "array",
      "required": true,
      "description": "Array of line item amounts before tax",
      "items": {
        "type": "number"
      },
      "minItems": 1,
      "maxItems": 100
    },
    "tax_rates": {
      "type": "array",
      "required": true,
      "description": "Array of applicable tax rates (as decimals, e.g., 0.08 for 8%)",
      "items": {
        "type": "number"
      },
      "minItems": 1,
      "maxItems": 10
    },
    "stated_tax_amounts": {
      "type": "array",
      "required": true,
      "description": "Tax amounts as stated on the invoice",
      "items": {
        "type": "number"
      },
      "minItems": 1,
      "maxItems": 100
    },
    "invoice_total": {
      "type": "number",
      "required": true,
      "description": "Total invoice amount including all taxes"
    },
    "tax_jurisdiction": {
      "type": "string",
      "required": true,
      "description": "Tax jurisdiction code for rate validation"
    },
    "exempt_items": {
      "type": "array",
      "required": false,
      "description": "Array of line item indices that are tax exempt",
      "items": {
        "type": "integer"
      },
      "default": "None"
    },
    "tolerance_percentage": {
      "type": "number",
      "required": false,
      "description": "Acceptable variance percentage for tax calculations (0-5)",
      "default": 0.5
    }
  },
  "error_messages": [
    "Mismatched array lengths: Line items, tax rates, and stated tax amounts arrays must have compatible lengths. Check data extraction.",
    "Invalid tax rate: Tax rates must be between 0 and 1 (e.g., 0.08 for 8%). Convert percentage to decimal.",
    "Invalid jurisdiction: Tax jurisdiction code not recognized in tax rate database. Verify jurisdiction code.",
    "Invalid tolerance: Tolerance percentage must be between 0-5. Use 0.5% for standard validation.",
    "Negative amounts: Tax amounts and line items cannot be negative. Check invoice data accuracy."
  ],
  "usage": "Provide arrays of line items, tax rates, and stated tax amounts along with total and jurisdiction. Optionally specify exempt items and tolerance. Returns tax validation results.",
  "output_details": {
    "tax_valid": {
      "type": "boolean",
      "description": "Whether tax calculations are accurate within tolerance"
    },
    "calculated_tax_total": {
      "type": "number",
      "description": "System-calculated total tax amount"
    },
    "stated_tax_total": {
      "type": "number",
      "description": "Tax total as stated on invoice"
    },
    "tax_variance": {
      "type": "number",
      "description": "Difference between calculated and stated tax"
    },
    "validation_errors": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of tax calculation errors found"
    }
  }
}