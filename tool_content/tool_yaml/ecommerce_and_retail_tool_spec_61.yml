field_name: ecommerce_and_retail
subfield: Customer Account Management
task: Order history tracking and purchase analytics
tool_description: |-
  **STEP 1 — Rate task difficulty**

  This task is of **medium** difficulty. It involves moderate complexity in data aggregation across multiple time periods, requires coordination between order processing and analytics systems, has moderate risk from data accuracy issues affecting customer trust, and needs integration with various data sources including transaction logs and customer profiles.

  **STEP 2 — Set a tool budget**

  For this medium difficulty task, I will target **12 tools** to cover the various aspects of order tracking, analytics computation, reporting, and customer interaction workflows.

  **STEP 3 — List all tool names and dependencies**

  1. **Order History Retriever** - Consumes: customer_id, date_range → Produces: order records
  2. **Order Status Tracker** - Consumes: order_id → Produces: current status, tracking info
  3. **Purchase Analytics Calculator** - Consumes: order data → Produces: spending metrics, patterns
  4. **Customer Segmentation Analyzer** - Consumes: purchase history → Produces: customer segment, value tier
  5. **Product Affinity Analyzer** - Consumes: purchase records → Produces: product relationships, recommendations
  6. **Return Analysis Tool** - Consumes: return records → Produces: return patterns, reasons
  7. **Order Search Filter** - Consumes: search criteria → Produces: filtered order list
  8. **Purchase Timeline Generator** - Consumes: order history → Produces: chronological timeline
  9. **Spending Trend Analyzer** - Consumes: historical purchases → Produces: trend metrics, forecasts
  10. **Order Export Tool** - Consumes: order data, format specs → Produces: exported files
  11. **Customer Loyalty Calculator** - Consumes: purchase history → Produces: loyalty scores, milestones
  12. **Purchase Comparison Tool** - Consumes: time periods → Produces: comparative analytics

  **STEP 4 — Multi-tool plans**

  **Simple Plans:**
  1. Basic order lookup: Order History Retriever → Order Status Tracker (track specific orders)
  2. Quick analytics: Order History Retriever → Purchase Analytics Calculator (get spending summary)

  **Medium Plans:**
  1. Customer insights: Order History Retriever → Customer Segmentation Analyzer → Purchase Analytics Calculator (comprehensive customer profile)
  2. Product analysis: Order History Retriever → Product Affinity Analyzer → Return Analysis Tool (product performance assessment)

  **Complex Plans:**
  1. Full customer analytics: Order History Retriever → Purchase Analytics Calculator → Customer Segmentation Analyzer → Spending Trend Analyzer → Customer Loyalty Calculator → Purchase Timeline Generator (complete customer analysis)
  2. Business intelligence workflow: Order History Retriever → Order Search Filter → Purchase Comparison Tool → Spending Trend Analyzer → Order Export Tool (comparative business analysis with export)

  **STEP 5 — Produce tools**

  ```json
  {
    "tool_name": "Order History Retriever",
    "tool_description": "Retrieves comprehensive order history for a specific customer within a given date range, including order details, items, and basic status information.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Unique identifier for the customer"
      },
      "start_date": {
        "type": "string",
        "required": true,
        "description": "Start date for order history retrieval",
        "format": "date-time"
      },
      "end_date": {
        "type": "string",
        "required": true,
        "description": "End date for order history retrieval",
        "format": "date-time"
      },
      "include_cancelled": {
        "type": "boolean",
        "required": false,
        "description": "Whether to include cancelled orders",
        "default": false
      }
    },
    "error_messages": [
      "Invalid customer ID: The provided customer_id does not exist in the system.",
      "Invalid date range: start_date must be before end_date, and both must be valid ISO 8601 timestamps.",
      "Date range too large: Maximum allowed date range is 2 years.",
      "No access permissions: Customer data cannot be accessed due to privacy restrictions."
    ],
    "usage": "Provide customer_id and date range to retrieve order history. Set include_cancelled to true if cancelled orders should be included in results.",
    "output_details": {
      "total_orders": {
        "type": "integer",
        "description": "Total number of orders found"
      },
      "order_ids": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "List of order identification numbers"
      },
      "order_dates": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "List of order placement dates in ISO 8601 format"
      },
      "order_totals": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "List of total amounts for each order"
      },
      "order_statuses": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Current status of each order"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Order Status Tracker",
    "tool_description": "Provides detailed status tracking information for a specific order, including shipping details, delivery estimates, and status history.",
    "parameters": {
      "order_id": {
        "type": "string",
        "required": true,
        "description": "Unique order identifier"
      },
      "include_history": {
        "type": "boolean",
        "required": false,
        "description": "Whether to include full status change history",
        "default": true
      }
    },
    "error_messages": [
      "Order not found: The provided order_id does not exist in the system.",
      "Access denied: You do not have permission to view this order information.",
      "System unavailable: Order tracking system is temporarily unavailable."
    ],
    "usage": "Provide order_id to get current status and tracking information. Set include_history to false for current status only.",
    "output_details": {
      "current_status": {
        "type": "string",
        "description": "Current order status"
      },
      "tracking_number": {
        "type": "string",
        "description": "Shipping carrier tracking number"
      },
      "estimated_delivery": {
        "type": "string",
        "description": "Estimated delivery date in ISO 8601 format"
      },
      "carrier": {
        "type": "string",
        "description": "Shipping carrier name"
      },
      "status_history": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Chronological list of status changes"
      },
      "last_updated": {
        "type": "string",
        "description": "Timestamp of last status update in ISO 8601 format"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Purchase Analytics Calculator",
    "tool_description": "Calculates comprehensive purchase analytics including spending patterns, frequency metrics, average order values, and purchasing behavior insights from order history data.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Customer identifier for analytics calculation"
      },
      "order_ids": {
        "type": "array",
        "required": true,
        "description": "List of order IDs to analyze",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "order_totals": {
        "type": "array",
        "required": true,
        "description": "List of order total amounts",
        "items": {
          "type": "number"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "order_dates": {
        "type": "array",
        "required": true,
        "description": "List of order dates in ISO 8601 format",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "analysis_period_days": {
        "type": "integer",
        "required": false,
        "description": "Number of days to analyze for trend calculation",
        "default": 365
      },
      "currency": {
        "type": "string",
        "required": false,
        "description": "Currency code for monetary calculations",
        "default": "USD"
      },
      "include_seasonal_analysis": {
        "type": "boolean",
        "required": false,
        "description": "Whether to include seasonal purchasing patterns",
        "default": false
      }
    },
    "error_messages": [
      "Data mismatch: order_ids, order_totals, and order_dates arrays must have the same length.",
      "Invalid order data: Order totals must be positive numbers and dates must be valid ISO 8601 format.",
      "Insufficient data: At least 3 orders required for meaningful analytics calculation.",
      "Invalid analysis period: analysis_period_days must be between 30 and 1095 days.",
      "Unsupported currency: Provided currency code is not supported."
    ],
    "usage": "Provide customer_id and matching arrays of order_ids, order_totals, and order_dates. Optionally specify analysis_period_days, currency, and seasonal analysis preferences.",
    "output_details": {
      "total_spent": {
        "type": "number",
        "description": "Total amount spent across all orders"
      },
      "average_order_value": {
        "type": "number",
        "description": "Average value per order"
      },
      "order_frequency_days": {
        "type": "number",
        "description": "Average days between orders"
      },
      "largest_order_value": {
        "type": "number",
        "description": "Highest single order amount"
      },
      "spending_trend": {
        "type": "string",
        "description": "Overall spending trend: increasing, decreasing, or stable"
      },
      "purchase_velocity": {
        "type": "string",
        "description": "Purchase frequency category: low, medium, or high"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Customer Segmentation Analyzer",
    "tool_description": "Analyzes customer purchase behavior to determine customer segment, value tier, and behavioral characteristics based on RFM analysis and spending patterns.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Customer identifier for segmentation analysis"
      },
      "total_spent": {
        "type": "number",
        "required": true,
        "description": "Total lifetime spending amount"
      },
      "order_frequency_days": {
        "type": "number",
        "required": true,
        "description": "Average days between orders"
      },
      "last_purchase_date": {
        "type": "string",
        "required": true,
        "description": "Date of most recent purchase",
        "format": "date-time"
      },
      "total_orders": {
        "type": "integer",
        "required": true,
        "description": "Total number of orders placed"
      },
      "account_age_days": {
        "type": "integer",
        "required": false,
        "description": "Days since customer account creation",
        "default": 365
      }
    },
    "error_messages": [
      "Invalid spending data: total_spent must be a positive number.",
      "Invalid frequency data: order_frequency_days must be a positive number.",
      "Invalid date format: last_purchase_date must be in ISO 8601 format.",
      "Insufficient order history: total_orders must be at least 1.",
      "Invalid account age: account_age_days must be a positive integer."
    ],
    "usage": "Provide customer spending metrics including total_spent, order_frequency_days, last_purchase_date, and total_orders. Optionally specify account_age_days for more accurate segmentation.",
    "output_details": {
      "customer_segment": {
        "type": "string",
        "description": "Customer segment: Champions, Loyal Customers, Potential Loyalists, Recent Customers, Promising, Need Attention, About to Sleep, At Risk, Cannot Lose Them, or Hibernating"
      },
      "value_tier": {
        "type": "string",
        "description": "Customer value tier: High Value, Medium Value, or Low Value"
      },
      "recency_score": {
        "type": "integer",
        "description": "Recency score from 1-5 (5 being most recent)"
      },
      "frequency_score": {
        "type": "integer",
        "description": "Frequency score from 1-5 (5 being most frequent)"
      },
      "monetary_score": {
        "type": "integer",
        "description": "Monetary score from 1-5 (5 being highest spend)"
      },
      "churn_risk": {
        "type": "string",
        "description": "Churn risk level: Low, Medium, or High"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Product Affinity Analyzer",
    "tool_description": "Analyzes purchase history to identify product relationships, cross-selling opportunities, and generate personalized product recommendations based on buying patterns.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Customer identifier for product affinity analysis"
      },
      "product_ids": {
        "type": "array",
        "required": true,
        "description": "List of product IDs from customer's purchase history",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 500
      },
      "product_categories": {
        "type": "array",
        "required": true,
        "description": "List of product categories corresponding to product IDs",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 500
      },
      "purchase_frequencies": {
        "type": "array",
        "required": true,
        "description": "Purchase count for each product",
        "items": {
          "type": "integer"
        },
        "minItems": 1,
        "maxItems": 500
      },
      "recommendation_count": {
        "type": "integer",
        "required": false,
        "description": "Number of product recommendations to generate",
        "default": 5
      }
    },
    "error_messages": [
      "Array length mismatch: product_ids, product_categories, and purchase_frequencies must have equal lengths.",
      "Invalid product data: All product_ids must be non-empty strings and purchase_frequencies must be positive integers.",
      "Insufficient data: At least 2 different products required for meaningful affinity analysis.",
      "Invalid recommendation count: recommendation_count must be between 1 and 20."
    ],
    "usage": "Provide customer_id and matching arrays of product_ids, product_categories, and purchase_frequencies. Optionally specify recommendation_count for the number of recommendations to generate.",
    "output_details": {
      "favorite_categories": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Top product categories by purchase frequency"
      },
      "most_purchased_products": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Most frequently purchased product IDs"
      },
      "recommended_products": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Recommended product IDs based on affinity analysis"
      },
      "cross_sell_opportunities": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Product categories for cross-selling"
      },
      "purchase_diversity_score": {
        "type": "number",
        "description": "Score indicating purchase diversity from 0-1"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Return Analysis Tool",
    "tool_description": "Analyzes return patterns and reasons to provide insights into return behavior, product quality issues, and return rate trends.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Customer identifier for return analysis"
      },
      "return_order_ids": {
        "type": "array",
        "required": true,
        "description": "List of order IDs that had returns",
        "items": {
          "type": "string"
        },
        "minItems": 0,
        "maxItems": 100
      },
      "return_reasons": {
        "type": "array",
        "required": true,
        "description": "List of return reasons corresponding to each returned order",
        "items": {
          "type": "string"
        },
        "minItems": 0,
        "maxItems": 100
      },
      "return_amounts": {
        "type": "array",
        "required": true,
        "description": "List of return amounts for each returned order",
        "items": {
          "type": "number"
        },
        "minItems": 0,
        "maxItems": 100
      },
      "total_orders": {
        "type": "integer",
        "required": true,
        "description": "Total number of orders to calculate return rate"
      }
    },
    "error_messages": [
      "Array length mismatch: return_order_ids, return_reasons, and return_amounts must have equal lengths.",
      "Invalid return data: Return amounts must be non-negative numbers and order IDs must be non-empty strings.",
      "Invalid total orders: total_orders must be a positive integer and greater than or equal to the number of returns.",
      "Empty return data: All return arrays can be empty but must be provided."
    ],
    "usage": "Provide customer_id, arrays of return data (can be empty if no returns), and total_orders count. The tool calculates return patterns and provides insights.",
    "output_details": {
      "return_rate": {
        "type": "number",
        "description": "Percentage of orders that were returned"
      },
      "total_return_amount": {
        "type": "number",
        "description": "Total monetary value of all returns"
      },
      "most_common_return_reason": {
        "type": "string",
        "description": "Most frequently cited return reason"
      },
      "return_frequency": {
        "type": "string",
        "description": "Return frequency category: Never, Rare, Occasional, or Frequent"
      },
      "return_behavior": {
        "type": "string",
        "description": "Overall return behavior assessment"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Order Search Filter",
    "tool_description": "Filters and searches through order history based on multiple criteria including date ranges, amounts, status, and product information.",
    "parameters": {
      "order_ids": {
        "type": "array",
        "required": true,
        "description": "List of all order IDs to filter from",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "order_dates": {
        "type": "array",
        "required": true,
        "description": "List of order dates corresponding to order IDs",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "order_amounts": {
        "type": "array",
        "required": true,
        "description": "List of order amounts corresponding to order IDs",
        "items": {
          "type": "number"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "order_statuses": {
        "type": "array",
        "required": true,
        "description": "List of order statuses corresponding to order IDs",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "min_amount": {
        "type": "number",
        "required": false,
        "description": "Minimum order amount filter",
        "default": null
      },
      "max_amount": {
        "type": "number",
        "required": false,
        "description": "Maximum order amount filter",
        "default": null
      },
      "status_filter": {
        "type": "string",
        "required": false,
        "description": "Filter by specific order status",
        "default": null
      },
      "date_from": {
        "type": "string",
        "required": false,
        "description": "Filter orders from this date onwards",
        "format": "date-time",
        "default": null
      },
      "date_to": {
        "type": "string",
        "required": false,
        "description": "Filter orders up to this date",
        "format": "date-time",
        "default": null
      },
      "sort_by": {
        "type": "string",
        "required": false,
        "description": "Sort results by: date, amount, or status",
        "default": "date"
      },
      "sort_order": {
        "type": "string",
        "required": false,
        "description": "Sort order: asc or desc",
        "default": "desc"
      }
    },
    "error_messages": [
      "Array length mismatch: All input arrays must have equal lengths.",
      "Invalid amount filter: min_amount must be less than max_amount when both are specified.",
      "Invalid date filter: date_from must be before date_to when both are specified.",
      "Invalid sort parameters: sort_by must be 'date', 'amount', or 'status'; sort_order must be 'asc' or 'desc'.",
      "Invalid data format: Order dates must be ISO 8601 format and amounts must be positive numbers."
    ],
    "usage": "Provide arrays of order data and specify filter criteria. Use null values for filters you don't want to apply. Results will be sorted according to sort_by and sort_order parameters.",
    "output_details": {
      "filtered_order_ids": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Order IDs that match the filter criteria"
      },
      "filtered_dates": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Corresponding dates for filtered orders"
      },
      "filtered_amounts": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Corresponding amounts for filtered orders"
      },
      "filtered_statuses": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Corresponding statuses for filtered orders"
      },
      "total_filtered": {
        "type": "integer",
        "description": "Number of orders matching the filter criteria"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Purchase Timeline Generator",
    "tool_description": "Creates a chronological timeline visualization of customer purchase history with key milestones and spending patterns over time.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Customer identifier for timeline generation"
      },
      "order_dates": {
        "type": "array",
        "required": true,
        "description": "List of order dates in chronological order",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 200
      },
      "order_amounts": {
        "type": "array",
        "required": true,
        "description": "List of order amounts corresponding to dates",
        "items": {
          "type": "number"
        },
        "minItems": 1,
        "maxItems": 200
      },
      "timeline_granularity": {
        "type": "string",
        "required": false,
        "description": "Timeline granularity: daily, weekly, monthly, or yearly",
        "default": "monthly"
      }
    },
    "error_messages": [
      "Array length mismatch: order_dates and order_amounts must have equal lengths.",
      "Invalid date format: All dates must be in ISO 8601 format.",
      "Invalid amounts: All order amounts must be positive numbers.",
      "Invalid granularity: timeline_granularity must be 'daily', 'weekly', 'monthly', or 'yearly'.",
      "Insufficient data: At least 2 orders required for timeline generation."
    ],
    "usage": "Provide customer_id, chronologically ordered arrays of order_dates and order_amounts. Specify timeline_granularity to control the detail level of the generated timeline.",
    "output_details": {
      "timeline_periods": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Time periods for the timeline"
      },
      "period_spend": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Total spending for each time period"
      },
      "period_order_count": {
        "type": "array",
        "items": {
          "type": "integer"
        },
        "description": "Number of orders in each time period"
      },
      "first_purchase_date": {
        "type": "string",
        "description": "Date of first purchase"
      },
      "most_active_period": {
        "type": "string",
        "description": "Time period with highest activity"
      },
      "customer_lifetime_days": {
        "type": "integer",
        "description": "Days between first and last purchase"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Spending Trend Analyzer",
    "tool_description": "Analyzes spending trends over time to identify patterns, seasonality, growth rates, and predict future spending behavior.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Customer identifier for trend analysis"
      },
      "monthly_spending": {
        "type": "array",
        "required": true,
        "description": "Monthly spending amounts in chronological order",
        "items": {
          "type": "number"
        },
        "minItems": 3,
        "maxItems": 60
      },
      "month_labels": {
        "type": "array",
        "required": true,
        "description": "Month labels corresponding to spending amounts",
        "items": {
          "type": "string"
        },
        "minItems": 3,
        "maxItems": 60
      }
    },
    "error_messages": [
      "Array length mismatch: monthly_spending and month_labels must have equal lengths.",
      "Insufficient data: At least 3 months of data required for trend analysis.",
      "Invalid spending data: All spending amounts must be non-negative numbers.",
      "Invalid month format: Month labels should be in YYYY-MM format."
    ],
    "usage": "Provide customer_id and arrays of monthly_spending and corresponding month_labels. Data should be in chronological order for accurate trend analysis.",
    "output_details": {
      "overall_trend": {
        "type": "string",
        "description": "Overall spending trend: increasing, decreasing, stable, or volatile"
      },
      "growth_rate_percent": {
        "type": "number",
        "description": "Average monthly growth rate as percentage"
      },
      "seasonal_pattern": {
        "type": "string",
        "description": "Detected seasonal pattern if any"
      },
      "highest_spend_month": {
        "type": "string",
        "description": "Month with highest spending"
      },
      "lowest_spend_month": {
        "type": "string",
        "description": "Month with lowest spending"
      },
      "trend_confidence": {
        "type": "string",
        "description": "Confidence level in trend analysis: high, medium, or low"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Order Export Tool",
    "tool_description": "Exports order history and analytics data in various formats including CSV, JSON, and PDF reports with customizable fields and formatting options.",
    "parameters": {
      "customer_id": {
        "type": "string",
        "required": true,
        "description": "Customer identifier for the export"
      },
      "order_data": {
        "type": "array",
        "required": true,
        "description": "Order IDs to include in export",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 1000
      },
      "export_format": {
        "type": "string",
        "required": true,
        "description": "Export format: csv, json, or pdf"
      },
      "include_analytics": {
        "type": "boolean",
        "required": false,
        "description": "Whether to include analytics summary",
        "default": false
      },
      "date_range_start": {
        "type": "string",
        "required": false,
        "description": "Start date for export filter",
        "format": "date-time",
        "default": null
      },
      "date_range_end": {
        "type": "string",
        "required": false,
        "description": "End date for export filter",
        "format": "date-time",
        "default": null
      },
      "include_personal_info": {
        "type": "boolean",
        "required": false,
        "description": "Whether to include customer personal information",
        "default": true
      },
      "custom_filename": {
        "type": "string",
        "required": false,
        "description": "Custom filename for the export",
        "default": null
      }
    },
    "error_messages": [
      "Invalid export format: export_format must be 'csv', 'json', or 'pdf'.",
      "Invalid date range: date_range_start must be before date_range_end when both are specified.",
      "Empty order data: At least one order ID must be provided.",
      "Invalid filename: custom_filename cannot contain special characters /\\:*?\"<>|.",
      "Export size too large: Maximum 1000 orders can be exported at once."
    ],
    "usage": "Provide customer_id, order_data array, and export_format. Optionally specify analytics inclusion, date filters, personal info inclusion, and custom filename.",
    "output_details": {
      "export_filename": {
        "type": "string",
        "description": "Generated filename for the exported file"
      },
      "file_size_bytes": {
        "type": "integer",
        "description": "Size of the exported file in bytes"
      },
      "records_exported": {
        "type": "integer",
        "description": "Number of order records included in export"
      },
      "export_timestamp":
