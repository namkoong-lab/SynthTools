field_name: financial_trading
subfield: portfolio_construction_and_optimization
task: Asset allocation and diversification analysis
tool_description: "**STEP 1 — Rate task difficulty**\n\nThis task is **hard** due to its broad scope covering multiple asset classes, complex mathematical optimization requirements, regulatory constraints, and high-stakes financial implications where errors can lead to significant losses.\n\n**STEP 2 — Set a tool budget**\n\nFor this hard-level task, I'll target **17 tools** to comprehensively cover asset allocation, diversification analysis, risk modeling, optimization, and validation workflows.\n\n**STEP 3 — List all tool names and dependencies**\n\n1. **Asset Universe Builder** - Consumes: asset lists → Produces: validated asset universe\n2. **Historical Data Aggregator** - Consumes: asset symbols, time periods → Produces: price/return data\n3. **Return Calculator** - Consumes: price data → Produces: return series\n4. **Risk Metrics Calculator** - Consumes: return data → Produces: volatility, VaR, drawdowns\n5. **Correlation Matrix Generator** - Consumes: return series → Produces: correlation matrices\n6. **Covariance Matrix Estimator** - Consumes: return data → Produces: covariance matrices\n7. **Expected Return Estimator** - Consumes: historical data → Produces: forward-looking returns\n8. **Portfolio Optimizer** - Consumes: returns, covariance, constraints → Produces: optimal weights\n9. **Risk Budget Analyzer** - Consumes: weights, covariance → Produces: risk contributions\n10. **Diversification Scorer** - Consumes: weights, correlations → Produces: diversification metrics\n11. **Asset Class Mapper** - Consumes: asset list → Produces: asset class classifications\n12. **Constraint Validator** - Consumes: weights, constraints → Produces: compliance status\n13. **Backtester** - Consumes: weights, historical data → Produces: performance metrics\n14. **Scenario Analyzer** - Consumes: portfolio, scenarios → Produces: stress test results\n15. **Rebalancing Scheduler** - Consumes: current/target weights → Produces: rebalancing plan\n16. **Performance Attribution** - Consumes: returns, benchmarks → Produces: attribution analysis\n17. **Portfolio Reporter** - Consumes: all metrics → Produces: comprehensive reports\n\n**STEP 4 — Multi-tool plans**\n\n**Simple Plans:**\n- Basic allocation: Asset Universe Builder → Historical Data Aggregator → Return Calculator → Portfolio Optimizer\n- Risk assessment: Return Calculator → Risk Metrics Calculator → Correlation Matrix Generator\n\n**Medium Plans:**\n- Diversification analysis: Asset Class Mapper → Correlation Matrix Generator → Diversification Scorer → Portfolio Reporter\n- Risk budgeting: Covariance Matrix Estimator → Portfolio Optimizer → Risk Budget Analyzer → Constraint Validator\n\n**Complex Plans:**\n- Full optimization: Asset Universe Builder → Historical Data Aggregator → Return Calculator → Expected Return Estimator → Covariance Matrix Estimator → Portfolio Optimizer → Risk Budget Analyzer → Diversification Scorer → Backtester → Performance Attribution → Portfolio Reporter\n- Comprehensive risk analysis: Historical Data Aggregator → Return Calculator → Risk Metrics Calculator → Scenario Analyzer → Backtester → Rebalancing Scheduler → Portfolio Reporter\n\n**STEP 5 — Produce tools**\n\n```json\n{\n  \"tool_name\": \"Asset Universe Builder\",\n  \"tool_description\": \"Validates and constructs a tradeable asset universe from input symbols, filtering for liquidity, data availability, and investment constraints.\",\n  \"parameters\": {\n    \"asset_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"List of asset symbols to validate\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 2,\n      \"maxItems\": 500\n    },\n    \"min_market_cap\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Minimum market capitalization in USD millions\",\n      \"default\": 1000\n    },\n    \"exclude_sectors\": {\n      \"type\": \"array\",\n      \"required\": false,\n      \"description\": \"Sectors to exclude from universe\",\n      \"items\": {\"type\": \"string\"},\n      \"default\": []\n    }\n\
  \  },\n  \"error_messages\": [\n    \"Invalid asset symbols: One or more symbols are not recognized or not tradeable.\",\n    \"Insufficient universe size: After filtering, less than 2 assets remain in the universe.\",\n    \"Market cap filter too restrictive: min_market_cap must be a positive number less than 1000000.\"\n  ],\n  \"usage\": \"Provide asset_symbols array and optionally set filtering criteria. The tool validates each symbol and returns a clean, investable universe.\",\n  \"output_details\": {\n    \"valid_symbols\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"List of validated asset symbols\"\n    },\n    \"excluded_symbols\": {\n      \"type\": \"array\", \n      \"items\": {\"type\": \"string\"},\n      \"description\": \"List of symbols that were filtered out\"\n    },\n    \"universe_size\": {\n      \"type\": \"integer\",\n      \"description\": \"Final number of assets in universe\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Historical Data Aggregator\",\n  \"tool_description\": \"Retrieves and aggregates historical price and volume data for specified assets over a given time period.\",\n  \"parameters\": {\n    \"asset_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"List of asset symbols for data retrieval\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 1,\n      \"maxItems\": 500\n    },\n    \"start_date\": {\n      \"type\": \"string\",\n      \"required\": true,\n      \"description\": \"Start date for data retrieval\",\n      \"format\": \"date-time\"\n    },\n    \"end_date\": {\n      \"type\": \"string\", \n      \"required\": true,\n      \"description\": \"End date for data retrieval\",\n      \"format\": \"date-time\"\n    },\n    \"frequency\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Data frequency: daily, weekly, monthly\",\n      \"default\": \"daily\"\n    },\n    \"fields\": {\n      \"type\": \"array\",\n      \"required\": false,\n      \"description\": \"Data fields to retrieve\",\n      \"items\": {\"type\": \"string\"},\n      \"default\": [\"close\", \"volume\"]\n    }\n  },\n  \"error_messages\": [\n    \"Invalid date range: start_date must be before end_date and both must be valid dates.\",\n    \"Data not available: Historical data is not available for one or more symbols in the specified period.\",\n    \"Invalid frequency: Use one of [daily, weekly, monthly].\",\n    \"Invalid fields: Supported fields are [open, high, low, close, volume, adjusted_close].\"\n  ],\n  \"usage\": \"Provide asset symbols and date range. Optionally specify frequency and data fields. Returns time series data for all assets.\",\n  \"output_details\": {\n    \"data_points\": {\n      \"type\": \"integer\",\n      \"description\": \"Number of time periods retrieved\"\n    },\n    \"date_range\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Array of dates for which data was retrieved\"\n    },\n    \"symbols_retrieved\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"}, \n      \"description\": \"Symbols for which data was successfully retrieved\"\n    },\n    \"missing_data_count\": {\n      \"type\": \"integer\",\n      \"description\": \"Number of missing data points across all series\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Return Calculator\",\n  \"tool_description\": \"Calculates various types of returns (simple, log, excess) from price data with optional adjustments for dividends and corporate actions.\",\n  \"parameters\": {\n    \"price_data_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Symbols for which to calculate returns\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 1\n    },\n    \"return_type\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Type of return calculation\",\n      \"default\": \"simple\"\n    },\n    \"frequency\"\
  : {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Return frequency: daily, weekly, monthly, annual\",\n      \"default\": \"daily\"\n    }\n  },\n  \"error_messages\": [\n    \"Missing price data: Price data not available for one or more specified symbols.\",\n    \"Invalid return type: Use one of [simple, log, excess].\",\n    \"Insufficient data: At least 2 price points needed to calculate returns.\",\n    \"Invalid frequency: Use one of [daily, weekly, monthly, annual].\"\n  ],\n  \"usage\": \"Provide symbols with available price data and specify return calculation preferences. Returns calculated return series for each asset.\",\n  \"output_details\": {\n    \"return_series_length\": {\n      \"type\": \"integer\",\n      \"description\": \"Number of return observations per asset\"\n    },\n    \"symbols_processed\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Symbols for which returns were calculated\"\n    },\n    \"calculation_summary\": {\n      \"type\": \"string\",\n      \"description\": \"Summary of return calculation methodology used\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Risk Metrics Calculator\",\n  \"tool_description\": \"Computes comprehensive risk metrics including volatility, Value-at-Risk, maximum drawdown, and Sharpe ratios from return data.\",\n  \"parameters\": {\n    \"return_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Symbols for which to calculate risk metrics\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 1\n    },\n    \"confidence_level\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Confidence level for VaR calculation (0.90-0.99)\",\n      \"default\": 0.95\n    },\n    \"risk_free_rate\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Risk-free rate for Sharpe ratio calculation\",\n      \"default\": 0.02\n    },\n    \"lookback_window\": {\n      \"type\": \"integer\",\n      \"required\": false,\n      \"description\": \"Rolling window size for calculations (minimum 30)\",\n      \"default\": 252\n    },\n    \"metrics\": {\n      \"type\": \"array\",\n      \"required\": false,\n      \"description\": \"Risk metrics to calculate\",\n      \"items\": {\"type\": \"string\"},\n      \"default\": [\"volatility\", \"var\", \"sharpe\", \"max_drawdown\"]\n    }\n  },\n  \"error_messages\": [\n    \"Invalid confidence level: Must be between 0.90 and 0.99.\",\n    \"Insufficient data: Need at least 30 return observations for reliable risk calculations.\", \n    \"Invalid lookback window: Must be at least 30 and not exceed available data length.\",\n    \"Unknown metrics: Supported metrics are [volatility, var, cvar, sharpe, sortino, max_drawdown, skewness, kurtosis].\",\n    \"Missing return data: Return data not available for specified symbols.\"\n  ],\n  \"usage\": \"Provide symbols with calculated returns and specify risk calculation preferences. Returns comprehensive risk metrics for each asset.\",\n  \"output_details\": {\n    \"symbols_analyzed\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Symbols for which risk metrics were calculated\"\n    },\n    \"metrics_calculated\": {\n      \"type\": \"array\", \n      \"items\": {\"type\": \"string\"},\n      \"description\": \"List of risk metrics that were computed\"\n    },\n    \"analysis_period\": {\n      \"type\": \"string\",\n      \"description\": \"Time period covered by the risk analysis\"\n    },\n    \"warnings\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Any warnings about data quality or calculation limitations\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Correlation Matrix Generator\", \n  \"tool_description\": \"Generates correlation matrices between assets using various correlation measures and time windows.\",\n  \"parameters\": {\n    \"return_symbols\": {\n\
  \      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Asset symbols for correlation analysis\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 2\n    },\n    \"correlation_method\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Correlation calculation method\",\n      \"default\": \"pearson\"\n    },\n    \"rolling_window\": {\n      \"type\": \"integer\",\n      \"required\": false,\n      \"description\": \"Rolling window size for dynamic correlations\",\n      \"default\": 252\n    }\n  },\n  \"error_messages\": [\n    \"Insufficient assets: Need at least 2 assets for correlation calculation.\",\n    \"Invalid correlation method: Use one of [pearson, spearman, kendall].\",\n    \"Invalid rolling window: Must be at least 30 and not exceed available data length.\",\n    \"Missing return data: Return data not available for correlation calculation.\"\n  ],\n  \"usage\": \"Provide asset symbols with return data and specify correlation methodology. Returns correlation matrix and related statistics.\",\n  \"output_details\": {\n    \"matrix_size\": {\n      \"type\": \"integer\",\n      \"description\": \"Dimensions of the correlation matrix (n x n)\"\n    },\n    \"average_correlation\": {\n      \"type\": \"number\",\n      \"description\": \"Average pairwise correlation across all assets\"\n    },\n    \"max_correlation\": {\n      \"type\": \"number\", \n      \"description\": \"Highest pairwise correlation found\"\n    },\n    \"min_correlation\": {\n      \"type\": \"number\",\n      \"description\": \"Lowest pairwise correlation found\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Covariance Matrix Estimator\",\n  \"tool_description\": \"Estimates covariance matrices using various methodologies including sample covariance, shrinkage estimators, and robust estimators.\",\n  \"parameters\": {\n    \"return_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Asset symbols for covariance estimation\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 2\n    },\n    \"estimation_method\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Covariance estimation method\",\n      \"default\": \"sample\"\n    },\n    \"shrinkage_target\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Shrinkage target for regularized estimators\",\n      \"default\": \"identity\"\n    },\n    \"frequency_adjustment\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Frequency for annualizing covariance\",\n      \"default\": \"daily\"\n    }\n  },\n  \"error_messages\": [\n    \"Insufficient assets: Need at least 2 assets for covariance estimation.\",\n    \"Invalid estimation method: Use one of [sample, shrinkage, robust, ewma].\",\n    \"Invalid shrinkage target: Use one of [identity, single_factor, constant_correlation].\",\n    \"Singular matrix: Covariance matrix is not positive definite, try a different estimation method.\"\n  ],\n  \"usage\": \"Provide asset symbols with return data and specify estimation methodology. Returns covariance matrix and estimation diagnostics.\",\n  \"output_details\": {\n    \"matrix_rank\": {\n      \"type\": \"integer\",\n      \"description\": \"Rank of the estimated covariance matrix\"\n    },\n    \"condition_number\": {\n      \"type\": \"number\",\n      \"description\": \"Condition number indicating numerical stability\"\n    },\n    \"estimation_method_used\": {\n      \"type\": \"string\",\n      \"description\": \"Actual estimation method applied\"\n    },\n    \"is_positive_definite\": {\n      \"type\": \"boolean\",\n      \"description\": \"Whether the matrix is positive definite\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Expected Return Estimator\",\n  \"tool_description\": \"Estimates forward-looking expected returns using historical data, factor models, or analyst forecasts with various methodologies.\",\n  \"parameters\": {\n  \
  \  \"asset_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Assets for return estimation\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 1\n    },\n    \"estimation_method\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Method for estimating expected returns\",\n      \"default\": \"historical\"\n    },\n    \"lookback_period\": {\n      \"type\": \"integer\",\n      \"required\": false,\n      \"description\": \"Historical lookback period in days\",\n      \"default\": 252\n    },\n    \"factor_model\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Factor model for return estimation\",\n      \"default\": \"capm\"\n    },\n    \"market_return\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Expected market return for factor models\",\n      \"default\": 0.08\n    },\n    \"risk_free_rate\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Risk-free rate assumption\",\n      \"default\": 0.02\n    },\n    \"forecast_horizon\": {\n      \"type\": \"integer\",\n      \"required\": false,\n      \"description\": \"Forecast horizon in days\",\n      \"default\": 252\n    },\n    \"shrinkage_intensity\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Shrinkage toward prior for Bayesian methods\",\n      \"default\": 0.1\n    }\n  },\n  \"error_messages\": [\n    \"Invalid estimation method: Use one of [historical, capm, fama_french, black_litterman, bayesian].\",\n    \"Invalid lookback period: Must be at least 30 days and not exceed available data.\",\n    \"Invalid factor model: Use one of [capm, fama_french_3, fama_french_5].\",\n    \"Invalid rate parameters: market_return and risk_free_rate must be positive numbers.\",\n    \"Insufficient historical data: Need adequate history for chosen estimation method.\",\n    \"Invalid shrinkage intensity: Must be between 0 and 1.\"\n  ],\n  \"usage\": \"Provide asset symbols and specify return estimation methodology and parameters. Returns expected return estimates with confidence intervals.\",\n  \"output_details\": {\n    \"estimation_method_used\": {\n      \"type\": \"string\",\n      \"description\": \"Actual method used for estimation\"\n    },\n    \"symbols_estimated\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Assets for which returns were estimated\"\n    },\n    \"forecast_period\": {\n      \"type\": \"string\",\n      \"description\": \"Time horizon for the return estimates\"\n    },\n    \"average_expected_return\": {\n      \"type\": \"number\",\n      \"description\": \"Average expected return across all assets\"\n    },\n    \"estimation_uncertainty\": {\n      \"type\": \"number\",\n      \"description\": \"Average estimation uncertainty measure\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Portfolio Optimizer\",\n  \"tool_description\": \"Optimizes portfolio weights using various optimization objectives and constraints, including mean-variance, risk parity, and maximum diversification approaches.\",\n  \"parameters\": {\n    \"asset_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Assets to include in optimization\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 2\n    },\n    \"optimization_objective\": {\n      \"type\": \"string\",\n      \"required\": true,\n      \"description\": \"Portfolio optimization objective\"\n    },\n    \"target_return\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Target portfolio return for mean-variance optimization\",\n      \"default\": null\n    },\n    \"target_risk\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Target portfolio risk level\",\n      \"default\": null\n    },\n    \"weight_bounds\": {\n      \"type\": \"array\",\n      \"required\": false,\n      \"description\"\
  : \"Min and max weight bounds [min, max]\",\n      \"items\": {\"type\": \"number\"},\n      \"minItems\": 2,\n      \"maxItems\": 2,\n      \"default\": [0.0, 1.0]\n    },\n    \"sector_constraints\": {\n      \"type\": \"array\",\n      \"required\": false,\n      \"description\": \"Maximum allocation per sector\",\n      \"items\": {\"type\": \"number\"},\n      \"default\": []\n    },\n    \"transaction_costs\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Transaction cost assumption (basis points)\",\n      \"default\": 10\n    },\n    \"risk_aversion\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Risk aversion parameter for utility optimization\",\n      \"default\": 1.0\n    },\n    \"rebalancing_frequency\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Expected rebalancing frequency\",\n      \"default\": \"quarterly\"\n    },\n    \"solver\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Optimization solver to use\",\n      \"default\": \"cvxpy\"\n    }\n  },\n  \"error_messages\": [\n    \"Invalid optimization objective: Use one of [mean_variance, min_variance, max_sharpe, risk_parity, max_diversification, equal_weight].\",\n    \"Infeasible constraints: The specified constraints cannot be satisfied simultaneously.\",\n    \"Invalid weight bounds: Bounds must be [min, max] where 0 <= min <= max <= 1.\",\n    \"Missing required data: Expected returns or covariance matrix not available.\",\n    \"Optimization failed: Solver could not find optimal solution, try different parameters.\",\n    \"Invalid risk aversion: Must be a positive number.\",\n    \"Invalid transaction costs: Must be a non-negative number.\",\n    \"Invalid rebalancing frequency: Use one of [daily, weekly, monthly, quarterly, annual].\"\n  ],\n  \"usage\": \"Provide asset universe and optimization objective with constraints. Returns optimal portfolio weights and performance characteristics.\",\n  \"output_details\": {\n    \"optimization_status\": {\n      \"type\": \"string\",\n      \"description\": \"Status of the optimization (success, failed, infeasible)\"\n    },\n    \"objective_value\": {\n      \"type\": \"number\",\n      \"description\": \"Achieved objective function value\"\n    },\n    \"expected_return\": {\n      \"type\": \"number\",\n      \"description\": \"Expected portfolio return\"\n    },\n    \"expected_risk\": {\n      \"type\": \"number\",\n      \"description\": \"Expected portfolio volatility\"\n    },\n    \"sharpe_ratio\": {\n      \"type\": \"number\",\n      \"description\": \"Expected Sharpe ratio of optimized portfolio\"\n    },\n    \"active_positions\": {\n      \"type\": \"integer\",\n      \"description\": \"Number of assets with non-zero weights\"\n    },\n    \"max_weight\": {\n      \"type\": \"number\", \n      \"description\": \"Largest individual asset weight\"\n    },\n    \"weight_concentration\": {\n      \"type\": \"number\",\n      \"description\": \"Herfindahl concentration index of weights\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Risk Budget Analyzer\",\n  \"tool_description\": \"Analyzes risk contribution of individual assets and groups within a portfolio, computing marginal and component risk measures.\",\n  \"parameters\": {\n    \"portfolio_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Assets in the portfolio for risk analysis\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 2\n    },\n    \"portfolio_weights\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Portfolio weights corresponding to symbols\",\n      \"items\": {\"type\": \"number\"},\n      \"minItems\": 2\n    },\n    \"risk_measure\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Risk measure for decomposition\",\n      \"default\": \"volatility\"\n    },\n    \"grouping_method\": {\n      \"type\": \"string\",\n      \"\
  required\": false,\n      \"description\": \"Method for grouping assets\",\n      \"default\": \"sector\"\n    }\n  },\n  \"error_messages\": [\n    \"Mismatched arrays: portfolio_symbols and portfolio_weights must have same length.\",\n    \"Invalid weights: Weights must be non-negative and sum to 1.0.\",\n    \"Invalid risk measure: Use one of [volatility, var, cvar, expected_shortfall].\",\n    \"Missing covariance data: Covariance matrix not available for risk decomposition.\",\n    \"Invalid grouping method: Use one of [sector, asset_class, country, factor].\"\n  ],\n  \"usage\": \"Provide portfolio weights and symbols with covariance data. Returns detailed risk contribution analysis for individual assets and groups.\",\n  \"output_details\": {\n    \"total_portfolio_risk\": {\n      \"type\": \"number\",\n      \"description\": \"Total portfolio risk measure\"\n    },\n    \"risk_contributions\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"number\"},\n      \"description\": \"Risk contribution of each asset\"\n    },\n    \"marginal_contributions\": {\n      \"type\": \"array\", \n      \"items\": {\"type\": \"number\"},\n      \"description\": \"Marginal risk contribution per unit weight\"\n    },\n    \"concentration_ratio\": {\n      \"type\": \"number\",\n      \"description\": \"Risk concentration measure (0-1)\"\n    },\n    \"effective_assets\": {\n      \"type\": \"number\",\n      \"description\": \"Effective number of independent risk sources\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Diversification Scorer\",\n  \"tool_description\": \"Evaluates portfolio diversification using multiple metrics including correlation-based measures, concentration indices, and diversification ratios.\",\n  \"parameters\": {\n    \"portfolio_weights\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Portfolio allocation weights\",\n      \"items\": {\"type\": \"number\"},\n      \"minItems\": 2\n    },\n    \"asset_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Asset symbols corresponding to weights\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 2\n    },\n    \"benchmark_weights\": {\n      \"type\": \"array\",\n      \"required\": false,\n      \"description\": \"Benchmark portfolio weights for comparison\",\n      \"items\": {\"type\": \"number\"},\n      \"default\": []\n    },\n    \"diversification_measures\": {\n      \"type\": \"array\",\n      \"required\": false,\n      \"description\": \"Diversification measures to calculate\",\n      \"items\": {\"type\": \"string\"},\n      \"default\": [\"herfindahl\", \"effective_assets\", \"diversification_ratio\"]\n    }\n  },\n  \"error_messages\": [\n    \"Weight-symbol mismatch: portfolio_weights and asset_symbols must have same length.\",\n    \"Invalid weights: All weights must be non-negative and sum to 1.0.\",\n    \"Invalid diversification measures: Use subset of [herfindahl, gini, effective_assets, diversification_ratio, participation_ratio].\",\n    \"Missing correlation data: Correlation matrix required for diversification ratio calculation.\",\n    \"Benchmark mismatch: If provided, benchmark_weights must match portfolio length.\"\n  ],\n  \"usage\": \"Provide portfolio weights and asset symbols with correlation data. Optionally include benchmark for relative diversification analysis.\",\n  \"output_details\": {\n    \"overall_score\": {\n      \"type\": \"number\",\n      \"description\": \"Composite diversification score (0-100)\"\n    },\n    \"herfindahl_index\": {\n      \"type\": \"number\",\n      \"description\": \"Herfindahl concentration index\"\n    },\n    \"effective_assets\": {\n      \"type\": \"number\", \n      \"description\": \"Effective number of independent assets\"\n    },\n    \"diversification_ratio\": {\n      \"type\": \"number\",\n      \"description\": \"Diversification ratio measure\"\n    },\n    \"concentration_level\": {\n      \"type\": \"string\",\n      \"description\": \"Qualitative assessment of concentration\
  \ (low/medium/high)\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Asset Class Mapper\",\n  \"tool_description\": \"Maps individual assets to asset classes, sectors, and geographic regions for portfolio analysis and constraint application.\",\n  \"parameters\": {\n    \"asset_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Asset symbols to classify\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 1\n    },\n    \"classification_scheme\": {\n      \"type\": \"string\",\n      \"required\": false,\n      \"description\": \"Classification methodology to use\",\n      \"default\": \"standard\"\n    }\n  },\n  \"error_messages\": [\n    \"Unknown symbols: One or more asset symbols not found in classification database.\",\n    \"Invalid classification scheme: Use one of [standard, gics, custom].\",\n    \"Missing classification data: Asset classification information not available.\"\n  ],\n  \"usage\": \"Provide asset symbols to receive standardized asset class, sector, and geographic classifications for portfolio construction use.\",\n  \"output_details\": {\n    \"symbols_classified\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Assets successfully classified\"\n    },\n    \"asset_classes\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Asset class for each symbol\"\n    },\n    \"sectors\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"}, \n      \"description\": \"Sector classification for each symbol\"\n    },\n    \"regions\": {\n      \"type\": \"array\",\n      \"items\": {\"type\": \"string\"},\n      \"description\": \"Geographic region for each symbol\"\n    },\n    \"unique_classes\": {\n      \"type\": \"integer\",\n      \"description\": \"Number of distinct asset classes represented\"\n    }\n  }\n}\n```\n\n```json\n{\n  \"tool_name\": \"Constraint Validator\",\n  \"tool_description\": \"Validates portfolio weights against investment constraints including regulatory limits, internal guidelines, and risk budgets.\",\n  \"parameters\": {\n    \"portfolio_weights\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Portfolio weights to validate\",\n      \"items\": {\"type\": \"number\"},\n      \"minItems\": 1\n    },\n    \"asset_symbols\": {\n      \"type\": \"array\",\n      \"required\": true,\n      \"description\": \"Asset symbols corresponding to weights\",\n      \"items\": {\"type\": \"string\"},\n      \"minItems\": 1\n    },\n    \"max_individual_weight\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Maximum weight for any single asset\",\n      \"default\": 0.1\n    },\n    \"max_sector_weight\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Maximum weight for any sector\",\n      \"default\": 0.3\n    },\n    \"min_diversification\": {\n      \"type\": \"number\",\n      \"required\": false,\n      \"description\": \"Minimum required diversification score\",\n      \"default\": 0.5\n    }\n  },\n  \"error_messages\": [\n    \"Array length mismatch: portfolio_weights and asset_symbols must have same length.\",\n    \"Invalid weights: Weights must sum to 1.0 and be non-negative.\",\n    \""
