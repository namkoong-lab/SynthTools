field_name: financial_trading
subfield: portfolio_construction_and_optimization
task: Performance attribution and benchmarking analysis
tool_description: |-
  ## STEP 1 — Rate task difficulty

  This task is **hard** due to the complexity of performance attribution methodologies, extensive data requirements across multiple asset classes and timeframes, sophisticated mathematical decomposition techniques, and the critical nature of accurate results for investment decision-making.

  ## STEP 2 — Set a tool budget

  Given the hard difficulty rating, I will target **17 tools** within the 15-20 range to cover the comprehensive workflow of performance attribution and benchmarking analysis.

  ## STEP 3 — List all tool names with dependencies and affordances

  1. **Portfolio Data Loader** - Consumes: file paths, date ranges → Produces: portfolio holdings data
  2. **Benchmark Data Fetcher** - Consumes: benchmark identifiers, timeframes → Produces: benchmark return data
  3. **Return Calculator** - Consumes: price/holdings data → Produces: period returns
  4. **Performance Metrics Calculator** - Consumes: return series → Produces: risk-adjusted metrics
  5. **Attribution Model Selector** - Consumes: attribution method preferences → Produces: model configuration
  6. **Sector Attribution Analyzer** - Consumes: portfolio/benchmark data, sectors → Produces: sector attribution
  7. **Security Selection Analyzer** - Consumes: holdings, returns → Produces: selection effects
  8. **Asset Allocation Analyzer** - Consumes: portfolio weights, benchmark weights → Produces: allocation effects
  9. **Risk Factor Decomposer** - Consumes: returns, factor models → Produces: factor exposures/contributions
  10. **Currency Attribution Calculator** - Consumes: multi-currency positions → Produces: currency effects
  11. **Transaction Cost Analyzer** - Consumes: trade data → Produces: cost impact analysis
  12. **Benchmark Tracking Analyzer** - Consumes: portfolio/benchmark returns → Produces: tracking statistics
  13. **Statistical Significance Tester** - Consumes: attribution results → Produces: confidence intervals
  14. **Time Series Attribution Analyzer** - Consumes: multi-period data → Produces: time-based attribution
  15. **Interaction Effect Calculator** - Consumes: allocation/selection effects → Produces: interaction terms
  16. **Attribution Report Generator** - Consumes: all attribution results → Produces: formatted reports
  17. **Performance Comparison Engine** - Consumes: multiple portfolios/benchmarks → Produces: comparative analysis

  ## STEP 4 — Multi-tool plans

  **Simple Plans:**
  - **Basic Performance Review**: Portfolio Data Loader → Return Calculator → Performance Metrics Calculator → Attribution Report Generator
  - **Benchmark Comparison**: Benchmark Data Fetcher → Return Calculator → Benchmark Tracking Analyzer → Performance Comparison Engine

  **Medium Plans:**
  - **Sector Attribution Analysis**: Portfolio Data Loader → Benchmark Data Fetcher → Return Calculator → Sector Attribution Analyzer → Security Selection Analyzer → Statistical Significance Tester → Attribution Report Generator
  - **Multi-Factor Analysis**: Portfolio Data Loader → Return Calculator → Risk Factor Decomposer → Asset Allocation Analyzer → Performance Metrics Calculator → Attribution Report Generator

  **Complex Plans:**
  - **Comprehensive Attribution**: Portfolio Data Loader → Benchmark Data Fetcher → Return Calculator → Attribution Model Selector → Sector Attribution Analyzer → Security Selection Analyzer → Asset Allocation Analyzer → Currency Attribution Calculator → Interaction Effect Calculator → Statistical Significance Tester → Time Series Attribution Analyzer → Attribution Report Generator
  - **Full Risk-Adjusted Analysis**: Portfolio Data Loader → Benchmark Data Fetcher → Return Calculator → Performance Metrics Calculator → Risk Factor Decomposer → Transaction Cost Analyzer → Benchmark Tracking Analyzer → Currency Attribution Calculator → Time Series Attribution Analyzer → Statistical Significance Tester → Performance Comparison Engine → Attribution Report Generator

  ## STEP 5 — Produce tools

  ```json
  {
    "tool_name": "Portfolio Data Loader",
    "tool_description": "Loads and validates portfolio holdings data from various file formats, with date filtering and data quality checks.",
    "parameters": {
      "file_path": {
        "type": "string",
        "required": true,
        "description": "Path to the portfolio data file (CSV, Excel, JSON supported)"
      },
      "start_date": {
        "type": "string",
        "required": true,
        "description": "Start date for data loading (ISO 8601 format)",
        "format": "date-time"
      },
      "end_date": {
        "type": "string",
        "required": true,
        "description": "End date for data loading (ISO 8601 format)",
        "format": "date-time"
      }
    },
    "error_messages": [
      "File not found: Ensure the file_path exists and is accessible.",
      "Invalid date range: start_date must be before end_date and both must be valid ISO 8601 dates.",
      "Unsupported file format: Only CSV, Excel (.xlsx), and JSON files are supported.",
      "Missing required columns: Portfolio data must include date, security_id, and weight columns.",
      "Data quality issues: Check for missing values, negative weights, or weights not summing to 100%."
    ],
    "usage": "Provide file_path to portfolio holdings data and specify date range. The tool validates data quality and returns structured holdings information.",
    "output_details": {
      "total_records": {
        "type": "integer",
        "description": "Number of portfolio holding records loaded"
      },
      "date_range": {
        "type": "string",
        "description": "Actual date range of loaded data"
      },
      "securities_count": {
        "type": "integer",
        "description": "Number of unique securities in the portfolio"
      },
      "data_quality_score": {
        "type": "number",
        "description": "Data quality score from 0-100"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Benchmark Data Fetcher",
    "tool_description": "Retrieves benchmark return data and composition information for performance comparison and attribution analysis.",
    "parameters": {
      "benchmark_ticker": {
        "type": "string",
        "required": true,
        "description": "Benchmark identifier (e.g., SPY, VTI, MSCI World)"
      },
      "start_date": {
        "type": "string",
        "required": true,
        "description": "Start date for benchmark data (ISO 8601 format)",
        "format": "date-time"
      },
      "end_date": {
        "type": "string",
        "required": true,
        "description": "End date for benchmark data (ISO 8601 format)",
        "format": "date-time"
      },
      "frequency": {
        "type": "string",
        "required": false,
        "description": "Data frequency: daily, weekly, monthly",
        "default": "daily"
      },
      "include_composition": {
        "type": "boolean",
        "required": false,
        "description": "Whether to include benchmark composition data",
        "default": true
      }
    },
    "error_messages": [
      "Invalid benchmark ticker: Benchmark not found in supported universe.",
      "Date range too large: Maximum 10 years of daily data supported.",
      "Invalid frequency: Use daily, weekly, or monthly.",
      "Insufficient data: Less than 30 data points available for the specified period.",
      "Data provider error: External data source temporarily unavailable."
    ],
    "usage": "Specify benchmark_ticker and date range to retrieve benchmark data. Set frequency and include_composition based on analysis needs.",
    "output_details": {
      "benchmark_returns": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Time series of benchmark returns"
      },
      "return_dates": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Corresponding dates for return data"
      },
      "composition_available": {
        "type": "boolean",
        "description": "Whether composition data was successfully retrieved"
      },
      "data_points": {
        "type": "integer",
        "description": "Number of return observations retrieved"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Return Calculator",
    "tool_description": "Calculates portfolio and security returns using various methodologies including time-weighted, money-weighted, and geometric returns.",
    "parameters": {
      "price_data": {
        "type": "array",
        "required": true,
        "description": "Array of price values",
        "items": {
          "type": "number"
        },
        "minItems": 2
      },
      "dates": {
        "type": "array",
        "required": true,
        "description": "Array of corresponding dates",
        "items": {
          "type": "string"
        },
        "minItems": 2
      },
      "return_type": {
        "type": "string",
        "required": false,
        "description": "Type of return calculation: simple, logarithmic, geometric",
        "default": "simple"
      },
      "cash_flows": {
        "type": "array",
        "required": false,
        "description": "Cash flow amounts (for money-weighted returns)",
        "items": {
          "type": "number"
        },
        "default": "None"
      },
      "annualized": {
        "type": "boolean",
        "required": false,
        "description": "Whether to annualize the returns",
        "default": false
      }
    },
    "error_messages": [
      "Mismatched array lengths: price_data and dates arrays must have the same length.",
      "Invalid return type: Use simple, logarithmic, or geometric.",
      "Insufficient data: At least 2 price points required for return calculation.",
      "Invalid price data: Prices must be positive numbers.",
      "Cash flow mismatch: If provided, cash_flows array must match price_data length."
    ],
    "usage": "Provide price_data and corresponding dates arrays. Specify return_type and whether to annualize. Include cash_flows for money-weighted return calculations.",
    "output_details": {
      "returns": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Calculated return series"
      },
      "total_return": {
        "type": "number",
        "description": "Cumulative return over the period"
      },
      "annualized_return": {
        "type": "number",
        "description": "Annualized return (if requested)"
      },
      "calculation_method": {
        "type": "string",
        "description": "Method used for return calculation"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Performance Metrics Calculator",
    "tool_description": "Computes comprehensive risk-adjusted performance metrics including Sharpe ratio, alpha, beta, information ratio, and tracking error.",
    "parameters": {
      "portfolio_returns": {
        "type": "array",
        "required": true,
        "description": "Portfolio return series",
        "items": {
          "type": "number"
        },
        "minItems": 12
      },
      "benchmark_returns": {
        "type": "array",
        "required": true,
        "description": "Benchmark return series",
        "items": {
          "type": "number"
        },
        "minItems": 12
      },
      "risk_free_rate": {
        "type": "number",
        "required": false,
        "description": "Risk-free rate for Sharpe ratio calculation",
        "default": 0.02
      },
      "confidence_level": {
        "type": "number",
        "required": false,
        "description": "Confidence level for VaR calculation (0-1)",
        "default": 0.95
      },
      "frequency": {
        "type": "string",
        "required": false,
        "description": "Return frequency: daily, weekly, monthly, annual",
        "default": "monthly"
      }
    },
    "error_messages": [
      "Insufficient observations: At least 12 return observations required for reliable metrics.",
      "Return series length mismatch: Portfolio and benchmark return arrays must have equal length.",
      "Invalid confidence level: Must be between 0.8 and 0.99.",
      "Invalid risk-free rate: Must be a non-negative number less than 1.",
      "High volatility detected: Extreme return values may indicate data quality issues."
    ],
    "usage": "Input portfolio_returns and benchmark_returns arrays with corresponding risk_free_rate. Specify frequency to ensure proper annualization of metrics.",
    "output_details": {
      "sharpe_ratio": {
        "type": "number",
        "description": "Risk-adjusted return measure"
      },
      "information_ratio": {
        "type": "number",
        "description": "Active return per unit of tracking risk"
      },
      "alpha": {
        "type": "number",
        "description": "Excess return versus benchmark"
      },
      "beta": {
        "type": "number",
        "description": "Systematic risk measure"
      },
      "tracking_error": {
        "type": "number",
        "description": "Standard deviation of active returns"
      },
      "max_drawdown": {
        "type": "number",
        "description": "Maximum peak-to-trough decline"
      },
      "var_95": {
        "type": "number",
        "description": "Value at Risk at specified confidence level"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Attribution Model Selector",
    "tool_description": "Selects and configures the appropriate attribution methodology based on portfolio characteristics and analysis requirements.",
    "parameters": {
      "portfolio_type": {
        "type": "string",
        "required": true,
        "description": "Portfolio type: equity, fixed_income, multi_asset, alternatives"
      },
      "attribution_method": {
        "type": "string",
        "required": false,
        "description": "Attribution approach: brinson, brinson_fachler, attribution_analysis",
        "default": "brinson"
      },
      "time_horizon": {
        "type": "string",
        "required": false,
        "description": "Analysis period: daily, weekly, monthly, quarterly, annual",
        "default": "monthly"
      },
      "currency_hedged": {
        "type": "boolean",
        "required": false,
        "description": "Whether portfolio uses currency hedging",
        "default": false
      }
    },
    "error_messages": [
      "Unsupported portfolio type: Use equity, fixed_income, multi_asset, or alternatives.",
      "Invalid attribution method: Choose from brinson, brinson_fachler, or attribution_analysis.",
      "Incompatible configuration: Some attribution methods don't support certain portfolio types.",
      "Invalid time horizon: Use daily, weekly, monthly, quarterly, or annual."
    ],
    "usage": "Specify portfolio_type and preferred attribution_method. The tool validates compatibility and suggests optimal configuration parameters.",
    "output_details": {
      "selected_method": {
        "type": "string",
        "description": "Recommended attribution methodology"
      },
      "configuration": {
        "type": "string",
        "description": "Model configuration settings"
      },
      "supported_effects": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "List of attribution effects the model can calculate"
      },
      "recommendation_reason": {
        "type": "string",
        "description": "Explanation for method selection"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Sector Attribution Analyzer",
    "tool_description": "Performs sector-level attribution analysis decomposing returns into allocation and selection effects across industry sectors.",
    "parameters": {
      "portfolio_weights": {
        "type": "array",
        "required": true,
        "description": "Portfolio sector weights",
        "items": {
          "type": "number"
        },
        "minItems": 2,
        "maxItems": 50
      },
      "benchmark_weights": {
        "type": "array",
        "required": true,
        "description": "Benchmark sector weights",
        "items": {
          "type": "number"
        },
        "minItems": 2,
        "maxItems": 50
      },
      "portfolio_returns": {
        "type": "array",
        "required": true,
        "description": "Portfolio sector returns",
        "items": {
          "type": "number"
        },
        "minItems": 2,
        "maxItems": 50
      },
      "benchmark_returns": {
        "type": "array",
        "required": true,
        "description": "Benchmark sector returns",
        "items": {
          "type": "number"
        },
        "minItems": 2,
        "maxItems": 50
      },
      "sector_names": {
        "type": "array",
        "required": true,
        "description": "Names of sectors being analyzed",
        "items": {
          "type": "string"
        },
        "minItems": 2,
        "maxItems": 50
      },
      "attribution_method": {
        "type": "string",
        "required": false,
        "description": "Calculation method: brinson, geometric",
        "default": "brinson"
      },
      "include_interaction": {
        "type": "boolean",
        "required": false,
        "description": "Whether to calculate interaction effects",
        "default": true
      }
    },
    "error_messages": [
      "Array length mismatch: All input arrays must have the same length.",
      "Weight constraint violation: Sector weights must sum to approximately 1.0.",
      "Invalid sector names: Sector names cannot be empty or duplicate.",
      "Extreme values detected: Check for unrealistic returns or weights.",
      "Method not supported: Use brinson or geometric attribution method."
    ],
    "usage": "Provide sector-level weights and returns for both portfolio and benchmark, along with sector names. Choose attribution method and whether to include interaction effects.",
    "output_details": {
      "allocation_effects": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Allocation effect by sector"
      },
      "selection_effects": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Selection effect by sector"
      },
      "interaction_effects": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Interaction effect by sector"
      },
      "total_attribution": {
        "type": "number",
        "description": "Sum of all attribution effects"
      },
      "top_contributors": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Sectors with highest positive attribution"
      },
      "top_detractors": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Sectors with highest negative attribution"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Security Selection Analyzer",
    "tool_description": "Analyzes the impact of individual security selection decisions on portfolio performance relative to benchmark composition.",
    "parameters": {
      "portfolio_holdings": {
        "type": "array",
        "required": true,
        "description": "Portfolio security identifiers",
        "items": {
          "type": "string"
        },
        "minItems": 5,
        "maxItems": 1000
      },
      "portfolio_weights": {
        "type": "array",
        "required": true,
        "description": "Portfolio security weights",
        "items": {
          "type": "number"
        },
        "minItems": 5,
        "maxItems": 1000
      },
      "security_returns": {
        "type": "array",
        "required": true,
        "description": "Individual security returns",
        "items": {
          "type": "number"
        },
        "minItems": 5,
        "maxItems": 1000
      },
      "benchmark_weights": {
        "type": "array",
        "required": true,
        "description": "Benchmark security weights",
        "items": {
          "type": "number"
        },
        "minItems": 5,
        "maxItems": 1000
      },
      "analysis_level": {
        "type": "string",
        "required": false,
        "description": "Analysis granularity: security, sector, style",
        "default": "security"
      }
    },
    "error_messages": [
      "Holdings data mismatch: portfolio_holdings, portfolio_weights, security_returns, and benchmark_weights must have equal length.",
      "Invalid weights: Weights must be non-negative and sum to approximately 1.0.",
      "Missing benchmark data: Some portfolio securities not found in benchmark universe.",
      "Extreme return values: Check for potential data errors in security returns.",
      "Invalid analysis level: Use security, sector, or style."
    ],
    "usage": "Input portfolio holdings with weights and returns, plus corresponding benchmark weights. Specify analysis_level for aggregation granularity.",
    "output_details": {
      "selection_effect": {
        "type": "number",
        "description": "Total security selection effect"
      },
      "top_stock_picks": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Best performing security selections"
      },
      "worst_stock_picks": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Worst performing security selections"
      },
      "hit_rate": {
        "type": "number",
        "description": "Percentage of selections that outperformed"
      },
      "average_contribution": {
        "type": "number",
        "description": "Average contribution per security"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Asset Allocation Analyzer",
    "tool_description": "Evaluates asset allocation decisions and their impact on portfolio performance across different asset classes and geographic regions.",
    "parameters": {
      "portfolio_allocation": {
        "type": "array",
        "required": true,
        "description": "Portfolio asset class weights",
        "items": {
          "type": "number"
        },
        "minItems": 2,
        "maxItems": 20
      },
      "benchmark_allocation": {
        "type": "array",
        "required": true,
        "description": "Benchmark asset class weights",
        "items": {
          "type": "number"
        },
        "minItems": 2,
        "maxItems": 20
      },
      "asset_returns": {
        "type": "array",
        "required": true,
        "description": "Asset class returns for the period",
        "items": {
          "type": "number"
        },
        "minItems": 2,
        "maxItems": 20
      },
      "asset_names": {
        "type": "array",
        "required": true,
        "description": "Asset class identifiers",
        "items": {
          "type": "string"
        },
        "minItems": 2,
        "maxItems": 20
      },
      "rebalancing_frequency": {
        "type": "string",
        "required": false,
        "description": "Portfolio rebalancing frequency: monthly, quarterly, semi_annual, annual",
        "default": "quarterly"
      },
      "transaction_costs": {
        "type": "number",
        "required": false,
        "description": "Transaction costs as percentage",
        "default": 0.0015
      }
    },
    "error_messages": [
      "Array dimension mismatch: All input arrays must have identical length.",
      "Allocation constraint violation: Allocations must sum to 1.0 (±1%).",
      "Invalid asset names: Asset names cannot be empty or contain duplicates.",
      "Unrealistic transaction costs: Transaction costs must be between 0 and 5%.",
      "Invalid rebalancing frequency: Use monthly, quarterly, semi_annual, or annual."
    ],
    "usage": "Specify asset allocations for portfolio and benchmark along with asset returns and names. Set rebalancing frequency and transaction costs for realistic analysis.",
    "output_details": {
      "allocation_effect": {
        "type": "number",
        "description": "Total asset allocation effect on performance"
      },
      "best_allocations": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Asset classes with best allocation decisions"
      },
      "worst_allocations": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Asset classes with worst allocation decisions"
      },
      "rebalancing_cost": {
        "type": "number",
        "description": "Estimated cost of rebalancing activities"
      },
      "allocation_efficiency": {
        "type": "number",
        "description": "Efficiency score of allocation decisions (0-100)"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Risk Factor Decomposer",
    "tool_description": "Decomposes portfolio returns into systematic risk factor exposures using multi-factor models such as Fama-French, Carhart, or custom factor models.",
    "parameters": {
      "portfolio_returns": {
        "type": "array",
        "required": true,
        "description": "Time series of portfolio returns",
        "items": {
          "type": "number"
        },
        "minItems": 36
      },
      "factor_model": {
        "type": "string",
        "required": true,
        "description": "Risk factor model: fama_french_3, fama_french_5, carhart_4, custom"
      },
      "market_returns": {
        "type": "array",
        "required": true,
        "description": "Market factor returns",
        "items": {
          "type": "number"
        },
        "minItems": 36
      },
      "factor_returns": {
        "type": "array",
        "required": false,
        "description": "Additional factor returns (for multi-factor models)",
        "items": {
          "type": "number"
        },
        "default": "None"
      },
      "factor_names": {
        "type": "array",
        "required": false,
        "description": "Names of additional factors",
        "items": {
          "type": "string"
        },
        "default": "None"
      },
      "risk_free_rate": {
        "type": "array",
        "required": false,
        "description": "Risk-free rate time series",
        "items": {
          "type": "number"
        },
        "default": "None"
      },
      "rolling_window": {
        "type": "integer",
        "required": false,
        "description": "Rolling window size for time-varying analysis (months)",
        "default": 36
      }
    },
    "error_messages": [
      "Insufficient data: Minimum 36 observations required for factor analysis.",
      "Model specification error: Selected factor model requires additional factor data.",
      "Time series length mismatch: All return series must have equal length.",
      "Invalid factor model: Choose from fama_french_3, fama_french_5, carhart_4, or custom.",
      "Factor data inconsistency: factor_returns and factor_names arrays must match in length.",
      "Rolling window too small: Minimum window size is 24 months."
    ],
    "usage": "Provide portfolio_returns and specify factor_model. Include required factor data based on model selection. Set rolling_window for time-varying factor analysis.",
    "output_details": {
      "factor_loadings": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Factor beta coefficients"
      },
      "factor_contributions": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Contribution of each factor to returns"
      },
      "alpha": {
        "type": "number",
        "description": "Unexplained return (alpha)"
      },
      "r_squared": {
        "type": "number",
        "description": "Model explanatory power"
      },
      "tracking_error_explained": {
        "type": "number",
        "description": "Portion of tracking error explained by factors"
      }
    }
  }
  ```

  ```json
  {
    "tool_name": "Currency Attribution Calculator",
    "tool_description": "Calculates the impact of currency movements and hedging decisions on international portfolio performance.",
    "parameters": {
      "base_currency": {
        "type": "string",
        "required": true,
        "description": "Portfolio base currency (ISO 3-letter code)"
      },
      "foreign_exposures": {
        "type": "array",
        "required": true,
        "description": "Foreign currency exposure amounts",
        "items": {
          "type": "number"
        },
        "minItems": 1,
        "maxItems": 50
      },
      "foreign_currencies": {
        "type": "array",
        "required": true,
        "description": "Foreign currency codes",
        "items": {
          "type": "string"
        },
        "minItems": 1,
        "maxItems": 50
      },
      "currency_returns": {
        "type": "array",
        "required": true,
        "description": "Currency return series vs base currency",
        "items": {
          "type": "number"
        },
        "minItems": 1,
        "maxItems": 50
      },
      "hedge_ratios": {
        "type": "array",
        "required": false,
        "description": "Currency hedge ratios (0-1 for each currency)",
        "items": {
          "type": "number"
        },
        "default": "None"
      },
      "hedging_costs": {
        "type": "array",
        "required": false,
        "description": "Hedging costs per currency",
        "items": {
          "type": "number"
        },
        "default": "None"
      }
    },
    "error_messages": [
      "Invalid base currency: Must be valid ISO 3-letter currency code.",
      "Array length mismatch: foreign_exposures, foreign_currencies, and currency_returns must have equal length.",
      "Invalid hedge ratios: Hedge ratios must be between 0 and 1.",
      "Currency code error: Foreign currencies must be valid ISO codes different from base currency.",
      "Exposure constraint violation: Sum of absolute foreign exposures cannot exceed 200%."
    ],
    "usage": "Specify base_currency and provide foreign currency exposures with corresponding returns. Include hedge_ratios and hedging_costs for hedged portfolios.",
    "output_details": {
      "currency_effect": {
        "type": "number",
        "description": "Total currency impact on portfolio returns"
      },
      "hedging_benefit": {
        "type": "number",
        "description": "Benefit/cost of currency hedging"
      },
      "currency_contributions": {
        "type": "array",
        "items": {
          "type": "number"
        },
        "description": "Individual currency contributions"
      },
      "unhedged_return": {
        "type": "number",
        "description": "Portfolio return without hedging"
      },
      "hedge
